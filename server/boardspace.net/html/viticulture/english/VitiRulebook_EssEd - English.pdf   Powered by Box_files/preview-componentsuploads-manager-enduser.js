(window.webpackJsonp=window.webpackJsonp||[]).push([["preview-components~uploads-manager-enduser"],{"+QkaJiEUcy":function(e,t,r){var n=r("fmRcAGUJsu"),o=r("t2Dn8I5vat"),i=r("cq/+ZHEllX"),a=r("T1AVtgJeLR"),s=r("GoyQGQ25b1"),c=r("mTTRHTH0TC"),u=r("itsjJeh/nX");e.exports=function e(t,r,l,f,p){t!==r&&i(r,(function(i,c){if(p||(p=new n),s(i))a(t,r,c,l,e,f,p);else{var h=f?f(u(t,c),i,c+"",t,r,p):void 0;void 0===h&&(h=i),o(t,c,h)}}),c)}},"03vecjQMf5":function(e,t,r){"use strict";var n=r("BSXSWhc9DH");function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.memoryStore=new n.a,this.localStorage=window.localStorage,this.isLocalStorageAvailable=this.canUseLocalStorage()}var t,r,i;return t=e,(r=[{key:"buildKey",value:function(e){return"".concat("localStore","/").concat("0","/").concat(e)}},{key:"canUseLocalStorage",value:function(){if(!this.localStorage)return!1;try{return this.localStorage.setItem(this.buildKey("TestKey"),"testValue"),this.localStorage.removeItem(this.buildKey("TestKey")),!0}catch(e){return!1}}},{key:"setItem",value:function(e,t){if(this.isLocalStorageAvailable)try{this.localStorage.setItem(this.buildKey(e),JSON.stringify(t))}catch(e){}else this.memoryStore.set(e,t)}},{key:"getItem",value:function(e){if(!this.isLocalStorageAvailable)return this.memoryStore.get(e);try{var t=this.localStorage.getItem(this.buildKey(e));return t?JSON.parse(t):null}catch(e){return null}}},{key:"removeItem",value:function(e){if(this.isLocalStorageAvailable)try{this.localStorage.removeItem(this.buildKey(e))}catch(e){}else this.memoryStore.unset(e)}}])&&o(t.prototype,r),i&&o(t,i),e}();t.a=i},"3L66sp1yaN":function(e,t,r){var n=r("MMmD7nEs5h"),o=r("ExA7XOIq4Z");e.exports=function(e){return o(e)&&n(e)}},"3iqZJKdelp":function(e,t,r){"use strict";var n=r("vN+2IcUykn"),o=r.n(n),i=r("vDqi2OZMyG"),a=r.n(i),s=r("mwIZSSbMl2"),c=r.n(s),u=r("ijCdHo2SAB"),l=r.n(u),f=r("aAZChApN2+"),p=r.n(f),h=r("vVaM4hVnXJ"),d=r("8Wpvjplx0g");function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=[d.Pc,d.Rc,d.Qc].map(p.a),O=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.id,o=r.clientName,i=r.language,s=r.token,u=r.version,l=r.sharedLink,f=r.sharedLinkPassword,p=r.responseInterceptor,h=r.requestInterceptor,y=r.retryableStatusCodes,b=void 0===y?[d.bd]:y,m=r.shouldRetry,v=void 0===m||m;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),g(this,"retryCount",0),g(this,"errorInterceptor",(function(e){if(t.shouldRetryRequest(e)){t.retryCount+=1;var r=t.getExponentialRetryTimeoutInMs(t.retryCount);return new Promise((function(n,o){t.retryTimeout=setTimeout((function(){t.axios(e.config).then(n,o)}),r)}))}var n=c()(e,"response.data")||e;return t.responseInterceptor(n),Promise.reject(e)})),this.clientName=o,this.id=n,this.language=i,this.responseInterceptor=p||this.defaultResponseInterceptor,this.retryableStatusCodes=b,this.sharedLink=l,this.sharedLinkPassword=f,this.shouldRetry=v,this.token=s,this.version=u,this.axios=a.a.create(),this.axiosSource=a.a.CancelToken.source(),this.axios.interceptors.response.use(this.responseInterceptor,this.errorInterceptor),"function"===typeof h&&this.axios.interceptors.request.use(h)}var t,r,n,o,i;return t=e,(r=[{key:"defaultResponseInterceptor",value:function(e){return e}},{key:"shouldRetryRequest",value:function(e){if(!this.shouldRetry||this.retryCount>=3)return!1;var t=e.response,r=e.request,n=e.config,o=c()(t,"status"),i=c()(n,"method"),a=r&&!t,s=o===d.bd,u=l()(this.retryableStatusCodes,o)&&l()(k,i);return a||s||u}},{key:"getExponentialRetryTimeoutInMs",value:function(e){var t=Math.ceil(1e3*Math.random());return 1e3*Math.pow(2,e-1)+t}},{key:"getParsedUrl",value:function(e){var t=document.createElement("a");return t.href=e,{api:e.replace("".concat(t.origin,"/2.0"),""),host:t.host,hostname:t.hostname,pathname:t.pathname,origin:t.origin,protocol:t.protocol,hash:t.hash,port:t.port}}},{key:"getHeaders",value:(o=regeneratorRuntime.mark((function e(t){var r,n,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=b(g({Accept:"application/json"},d.Nc,"application/json"),r),this.language&&!n[d.Kc]&&(n[d.Kc]=this.language),this.sharedLink&&(n.BoxApi="shared_link=".concat(this.sharedLink),this.sharedLinkPassword&&(n.BoxApi="".concat(n.BoxApi,"&shared_link_password=").concat(this.sharedLinkPassword))),this.clientName&&(n[d.Lc]=this.clientName),this.version&&(n[d.Mc]=this.version),o=t||this.id||"",e.next=9,h.a.getWriteToken(o,this.token);case 9:return(i=e.sent)&&(n.Authorization="Bearer ".concat(i)),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){m(i,r,n,a,s,"next",e)}function s(e){m(i,r,n,a,s,"throw",e)}a(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"get",value:function(e){var t=this,r=e.url,n=e.id,o=e.params,i=void 0===o?{}:o,a=e.headers,s=void 0===a?{}:a;return this.getHeaders(n,s).then((function(e){return t.axios.get(r,{cancelToken:t.axiosSource.token,params:i,headers:e,parsedUrl:t.getParsedUrl(r)})}))}},{key:"post",value:function(e){var t=this,r=e.url,n=e.id,o=e.data,i=e.params,a=e.headers,s=void 0===a?{}:a,c=e.method,u=void 0===c?d.Sc:c;return this.getHeaders(n,s).then((function(e){return t.axios({url:r,data:o,params:i,method:u,parsedUrl:t.getParsedUrl(r),headers:e})}))}},{key:"put",value:function(e){var t=e.url,r=e.id,n=e.data,o=e.params,i=e.headers,a=void 0===i?{}:i;return this.post({id:r,url:t,data:n,params:o,headers:a,method:d.Tc})}},{key:"delete",value:function(e){var t=e.url,r=e.id,n=e.data,o=void 0===n?{}:n,i=e.headers,a=void 0===i?{}:i;return this.post({id:r,url:t,data:o,headers:a,method:d.Oc})}},{key:"options",value:function(e){var t=this,r=e.id,n=e.url,o=e.data,i=e.headers,a=void 0===i?{}:i,s=e.successHandler,c=e.errorHandler;return this.getHeaders(r,a).then((function(e){return t.axios({url:n,data:o,method:d.Rc,headers:e}).then(s).catch(c)})).catch(c)}},{key:"uploadFile",value:function(e){var t=this,r=e.id,n=e.url,o=e.data,i=e.headers,a=void 0===i?{}:i,s=e.method,c=void 0===s?d.Sc:s,u=e.successHandler,l=e.errorHandler,f=e.progressHandler,p=e.withIdleTimeout,h=void 0!==p&&p,y=e.idleTimeoutDuration,b=void 0===y?12e4:y,m=e.idleTimeoutHandler;return this.getHeaders(r,a).then((function(e){var r,i=f;if(h){var s=function(){t.abort(),m&&m()};r=setTimeout(s,b),i=function(e){clearTimeout(r),r=setTimeout(s,b),f(e)}}t.axios({url:n,data:o,transformRequest:function(e,t){if(delete t[d.Jc],delete t[d.Nc],a[d.Nc]&&(t[d.Nc]=a[d.Nc]),e&&!(e instanceof Blob)&&e.attributes){var r=new FormData;return Object.keys(e).forEach((function(t){r.append(t,e[t])})),r}return e},method:c,headers:e,onUploadProgress:i,cancelToken:t.axiosSource.token}).then((function(e){clearTimeout(r),u(e)})).catch((function(e){clearTimeout(r),l(e)}))})).catch(l)}},{key:"abort",value:function(){this.retryTimeout&&clearTimeout(this.retryTimeout),this.axiosSource&&(this.axiosSource.cancel(),this.axiosSource=a.a.CancelToken.source())}}])&&v(t.prototype,r),n&&v(t,n),e}(),w=r("BSXSWhc9DH"),P=r("a2jX1cNsCJ"),C=r("fn3w3TIrL6");function _(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),A(this,"successHandler",(function(e){r.isDestroyed()||"function"!==typeof r.successCallback||r.successCallback(e)})),A(this,"errorHandler",(function(e){if(!r.isDestroyed()&&"function"===typeof r.errorCallback){var t=e.response;t&&t.data?r.errorCallback(t.data,r.errorCode):r.errorCallback(e,r.errorCode)}})),this.cache=t.cache||new w.a,this.apiHost=t.apiHost||d.z,this.uploadHost=t.uploadHost||d.C,this.options=j({},t,{apiHost:this.apiHost,uploadHost:this.uploadHost,cache:this.cache}),this.xhr=new O(this.options),this.destroyed=!1,this.consoleLog=t.consoleLog&&window.console&&window.console.log||o.a,this.consoleError=t.consoleError&&window.console&&window.console.error||o.a}var t,r,n,i,a;return t=e,(r=[{key:"destroy",value:function(){this.xhr.abort(),this.destroyed=!0}},{key:"isDestroyed",value:function(){return this.destroyed}},{key:"checkApiCallValidity",value:function(e,t,r){if(!r||!t)throw Object(C.a)();if(!t[e])throw Object(C.b)()}},{key:"getBaseApiUrl",value:function(){var e=this.apiHost.endsWith("/")?"2.0":"/2.0";return"".concat(this.apiHost).concat(e)}},{key:"getBaseUploadUrl",value:function(){var e=this.uploadHost.endsWith("/")?"api/2.0":"/api/2.0";return"".concat(this.uploadHost).concat(e)}},{key:"getCache",value:function(){return this.cache}},{key:"getUrl",value:function(e){throw new Error("Implement me!")}},{key:"format",value:function(e){throw new Error("Implement me!")}},{key:"get",value:function(e){var t=e.id,r=e.successCallback,n=e.errorCallback,o=e.requestData,i=e.url||this.getUrl(t);return this.makeRequest(d.Pc,t,i,r,n,o)}},{key:"post",value:function(e){var t=e.id,r=e.url,n=e.data,o=e.successCallback,i=e.errorCallback;return this.makeRequest(d.Sc,t,r,o,i,n)}},{key:"put",value:function(e){var t=e.id,r=e.url,n=e.data,o=e.successCallback,i=e.errorCallback;return this.makeRequest(d.Tc,t,r,o,i,n)}},{key:"delete",value:function(e){var t=e.id,r=e.url,n=e.data,o=e.successCallback,i=e.errorCallback;return this.makeRequest(d.Oc,t,r,o,i,n)}},{key:"makeRequest",value:(i=regeneratorRuntime.mark((function e(t,r,n,o,i){var a,s,c,u,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=l.length>5&&void 0!==l[5]?l[5]:{},!this.isDestroyed()){e.next=3;break}return e.abrupt("return");case 3:return this.successCallback=o,this.errorCallback=i,s=this.xhr[t.toLowerCase()].bind(this.xhr),e.prev=6,e.next=9,s(j({id:Object(P.a)(r),url:n},a));case 9:c=e.sent,u=c.data,this.successHandler(u),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(6),this.errorHandler(e.t0);case 17:case"end":return e.stop()}}),e,this,[[6,14]])})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){_(o,r,n,a,s,"next",e)}function s(e){_(o,r,n,a,s,"throw",e)}a(void 0)}))},function(e,t,r,n,o){return a.apply(this,arguments)})}])&&E(t.prototype,r),n&&E(t,n),e}();t.a=I},"4qC0uLa34A":function(e,t,r){var n=r("NykKPXtg8B"),o=r("Z0cmtJMNoo"),i=r("ExA7XOIq4Z"),a="[object String]";e.exports=function(e){return"string"==typeof e||!o(e)&&i(e)&&n(e)==a}},"5mCW88DpfN":function(e,t,r){"use strict";var n=r("k1oiGGP5HG"),o=r("8Wpvjplx0g"),i=r("7EA+m7Wkjh");function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),u(this,l(t).apply(this,arguments))}var r,n,a,p,h;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(o.k).concat(e)}},{key:"getUrl",value:function(e){var t=e?"/".concat(e):"";return"".concat(this.getBaseApiUrl(),"/web_links").concat(t)}},{key:"getWeblink",value:(p=regeneratorRuntime.mark((function e(t,r,n){var a,s,c,u,l,f,p,h=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=h.length>3&&void 0!==h[3]?h[3]:{},s=a.fields,!this.isDestroyed()){e.next=3;break}return e.abrupt("return");case 3:if(c=this.getCache(),u=this.getCacheKey(t),this.errorCode=o.mb,this.successCallback=r,this.errorCallback=n,!c.has(u)){e.next=13;break}if(0!==Object(i.i)(c.get(u),s).length){e.next=13;break}return r(c.get(u)),e.abrupt("return");case 13:return l={url:this.getUrl(t)},s&&(l.params={fields:s.toString()}),e.prev=15,e.next=18,this.xhr.get(l);case 18:if(f=e.sent,p=f.data,!this.isDestroyed()){e.next=22;break}return e.abrupt("return");case 22:c.has(u)?c.merge(u,p):c.set(u,p),this.successHandler(c.get(u)),e.next=29;break;case 26:e.prev=26,e.t0=e.catch(15),this.errorHandler(e.t0);case 29:case"end":return e.stop()}}),e,this,[[15,26]])})),h=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=p.apply(e,t);function i(e){s(o,r,n,i,a,"next",e)}function a(e){s(o,r,n,i,a,"throw",e)}i(void 0)}))},function(e,t,r){return h.apply(this,arguments)})}])&&c(r.prototype,n),a&&c(r,a),t}(n.a);t.a=p},"7EA+m7Wkjh":function(e,t,r){"use strict";r.d(t,"a",(function(){return v})),r.d(t,"b",(function(){return m})),r.d(t,"d",(function(){return y})),r.d(t,"c",(function(){return b})),r.d(t,"h",(function(){return k})),r.d(t,"i",(function(){return g})),r.d(t,"e",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"g",(function(){return h}));var n=r("OFL0i0gLuj"),o=r.n(n),i=r("D1y2Gn20OY"),a=r.n(i),s=r("8Wpvjplx0g");function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){l(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return(f="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=[s.Xb,s.ic,s.Ec,s.yc,s.lc,s.Ub,s.nc,s.mc,s.gc,s.Pb,s.hc,s.Wb,s.bc,s.cc,s.Mb,s.ac,s.rc],h=[s.Xb,s.ic,s.yc,s.Ub,s.Vb,s.xc,s.nc,s.Nb,s.Ob,s.Pb,s.Qb,s.gc,s.hc,s.kc,s.Sb,s.fc,s.dc,s.Fc,s.Gc,s.bc,s.uc,s.Mb,s.ac],d=[s.Xb,s.nc,s.xc,s.wc,s.Vb,s.ic,s.yc,s.Ub,s.rc,s.Hc,s.Mb,s.ac],y=[s.Vb,s.gc,s.hc,s.uc,s.yc,s.Gc],b=[s.Mb,s.Pb,s.Ub,s.ac,s.gc,s.hc,s.ic,s.nc,s.sc,s.tc,s.vc,s.yc,s.Cc,s.Dc,s.Gc],m=(s.Jb,s.xc,s.Bc,s.Zb,s.Pb,s.Qb,s.Tb,s.ec,s.Lb,s.zc,[s.Ac,s.ec,s.Pb,s.Qb,s.gc,s.nc]),v=(s.Qb,s.hc,s.kc,s.Lb,[s.Ib,s.Kb,s.Qb,s.jc,s.qc]);function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e&&"object"===f(e)&&0!==Object.keys(e).length?t.filter((function(t){return!o()(e,t)})):t}function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!Array.isArray(t)||0===t.length)return e;var r=u({},e);return g(e,t).forEach((function(e){a()(r,e,null)})),r}},"7z6RzydI8F":function(e,t,r){"use strict";r.d(t,"a",(function(){return w})),r.d(t,"b",(function(){return P})),r.d(t,"c",(function(){return C})),r.d(t,"d",(function(){return _})),r.d(t,"e",(function(){return S})),r.d(t,"g",(function(){return E})),r.d(t,"f",(function(){return A})),r.d(t,"h",(function(){return x})),r.d(t,"i",(function(){return D})),r.d(t,"j",(function(){return U})),r.d(t,"l",(function(){return R})),r.d(t,"m",(function(){return M})),r.d(t,"k",(function(){return T}));var n=r("aWKKml4MOj"),o=r("q9wI8Vu9Ou"),i=r("QsY5fq3O3j"),a=r("5LR3NAxzKP"),s=r("Pq+eeExwmG"),c=r("TnLiKFH8iw"),u=r("BvuJV68Ath"),l=r("B60CBWrONK"),f=r("jyz5Lsk3MC"),p=r("zfug/tAS+n"),h=r("LxMIR+SGr9"),d=r("iXVU+MoJ3G"),y=r("+9+M7Asvhi"),b=r("LwZZ+jkMTU");function m(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){m(i,n,o,a,s,"next",e)}function s(e){m(i,n,o,a,s,"throw",e)}a(void 0)}))}}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(r,!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=Object(n.a)(y.d),P=Object(n.a)(y.a),C=Object(n.a)(y.e),_=Object(n.a)(y.f),S=Object(n.a)(y.g),j=Object(n.a)(y.h),E=Object(n.a)(y.c),A=Object(n.a)(y.b),I=Object(n.a)(y.i),x=function(e){return function(t,r){var n=e.status,f=e.folderID,p=e.id,y=e.isFolder;if(n===b.d&&void 0!==f&&void 0!==p){var m=y?Object(l.c)(p):Object(l.b)(p);t(Object(c.a)({newItemTypedID:m,targetFolderID:f})),t(Object(u.d)(m)),t(Object(a.c)(s.a.UPLOAD)),t(Object(i.b)("file-uploaded-trigger")),t(Object(h.a)()),t(Object(d.c)(m,"upload"))}if(!y){var v=k({},e,{showUploadErrorBanner:Object(o.l)(r(),"eua_experiment_show_upload_error_banner")});t(I(v))}}},R=Object(n.a)(y.m,(function(e){return k({},e,{uploadInitTimestamp:Date.now()})})),T=Object(n.a)(y.l),D=Object(n.a)(y.j),U=Object(n.a)(y.k),M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(function(){var r=v(regeneratorRuntime.mark((function r(n){var o,i,a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.folderName,i={folderName:o,parentFolderID:t},r.prev=2,r.next=5,Object(f.g)("/app-api/enduserapp/folder/create",i);case 5:a=r.sent,s=a.folderID,n(Object(c.a)({newItemTypedID:Object(l.c)(s),targetFolderID:t})),e.items.forEach((function(e){e.folderID=s.toString()})),n(R(e)),n(j(s)),p.a.recordAction({action:"programmatic",application:"files",component:"ftuxuploademptystate",target:"mydocsfoldercreated"}),r.next=17;break;case 14:r.prev=14,r.t0=r.catch(2),p.a.recordAction({action:"programmatic",application:"files",component:"ftuxuploademptystate",target:"mydocsfoldernotcreated"});case 17:case"end":return r.stop()}}),r,null,[[2,14]])})));return function(e){return r.apply(this,arguments)}}())}},"AkPpBUyl/w":function(e,t,r){"use strict";var n=r("BSXSWhc9DH"),o=r("FK3KWhmfP1"),i=r("vN+2IcUykn"),a=r.n(i),s=r("DUBYMsvOMy"),c=r("YrhTq/oyJV"),u=r("fh8xsLuPZu");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function p(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){f(i,n,o,a,s,"next",e)}function s(e){f(i,n,o,a,s,"throw",e)}a(void 0)}))}}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v="Content-MD5",g=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?y(e):t}(this,(e=d(t)).call.apply(e,[this].concat(o))),m(y(r),"uploadSuccessHandler",(function(e){var t=e.data.entries;r.isDestroyed()||"function"===typeof r.successCallback&&r.successCallback(t)})),m(y(r),"uploadProgressHandler",(function(e){r.isDestroyed()||"function"===typeof r.progressCallback&&r.progressCallback(e)})),m(y(r),"preflightSuccessHandler",function(){var e=p(regeneratorRuntime.mark((function e(t){var n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.data,!r.isDestroyed()){e.next=3;break}return e.abrupt("return");case 3:return(o=n.upload_url)||(o="".concat(r.getBaseUploadUrl(),"/files/content"),r.fileId&&(o=o.replace("content","".concat(r.fileId,"/content")))),i=JSON.stringify({name:r.fileName,parent:{id:r.folderId},content_modified_at:Object(c.k)(r.file)}),a={url:o,data:{attributes:i,file:r.file},headers:{},successHandler:r.uploadSuccessHandler,errorHandler:r.preflightErrorHandler,progressHandler:r.uploadProgressHandler},e.next=9,r.computeSHA1(r.file);case 9:(s=e.sent)&&(a.headers=m({},v,s)),r.xhr.uploadFile(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r}var r,n,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,e),r=t,(n=[{key:"upload",value:function(e){var t=e.folderId,r=e.fileId,n=e.file,o=e.successCallback,i=void 0===o?a.a:o,s=e.errorCallback,c=void 0===s?a.a:s,u=e.progressCallback,l=void 0===u?a.a:u,f=e.overwrite,p=void 0===f||f;this.isDestroyed()||(this.folderId=t,this.fileId=r,this.file=n,this.fileName=this.file.name,this.successCallback=i,this.errorCallback=c,this.progressCallback=l,this.overwrite=p,this.makePreflightRequest())}},{key:"cancel",value:function(){this.isDestroyed()||(clearTimeout(this.retryTimeout),this.destroy())}},{key:"computeSHA1",value:(i=p(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="",e.prev=1,n=new window.FileReader,e.next=5,this.readFile(n,t);case 5:return o=e.sent,i=o.buffer,e.next=9,Object(s.a)("SHA-1",i);case 9:a=e.sent,c=Array.from(new Uint8Array(a)),r=c.map((function(e){return"00".concat(e.toString(16)).slice(-2)})).join(""),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(1);case 16:return e.abrupt("return",r);case 17:case"end":return e.stop()}}),e,this,[[1,14]])}))),function(e){return i.apply(this,arguments)})}])&&h(r.prototype,n),o&&h(r,o),t}(u.a),k=r("VqrN+CpLF1"),O=r("dEgP6Cehtk"),w=r("5mCW88DpfN"),P=r("PRoclJX2va"),C=r("7EA+m7Wkjh"),_=r("fn3w3TIrL6"),S=r("3iqZJKdelp"),j=r("8Wpvjplx0g");function E(e){return(E="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==E(t)&&"function"!==typeof t?T(e):t}(this,(e=R(t)).call.apply(e,[this].concat(o))),U(T(r),"searchSuccessHandler",(function(e){var t=e.data;if(!r.isDestroyed()){var n=t.entries,o=t.total_count,i=t.limit,a=t.offset;if(!Array.isArray(n)||"number"!==typeof o||"number"!==typeof i||"number"!==typeof a)throw Object(_.a)();var s=Object(P.a)(n,new k.a(r.options),new O.a(r.options),new w.a(r.options));r.itemCache=(r.itemCache||[]).concat(s),r.getCache().set(r.key,{item_collection:I({},t,{entries:r.itemCache})}),r.finish()}})),U(T(r),"searchErrorHandler",(function(e){r.isDestroyed()||r.errorCallback(e,r.errorCode)})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),r=t,(n=[{key:"getEncodedQuery",value:function(e){return encodeURIComponent(e)}},{key:"getCacheKey",value:function(e,t){return"".concat(j.j).concat(e,"|").concat(t)}},{key:"getUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/search")}},{key:"isLoaded",value:function(){return this.getCache().has(this.key)}},{key:"finish",value:function(){if(!this.isDestroyed()){var e=this.getCache(),t=e.get(this.key).item_collection;if(!t)throw Object(_.a)();var r=t.entries,n=t.total_count;if(!Array.isArray(r)||"number"!==typeof n)throw Object(_.a)();var o={id:this.id,items:r.map((function(t){return e.get(t)})),offset:this.offset,percentLoaded:100,sortBy:j.pc,sortDirection:j.ee,totalCount:n};this.successCallback(o)}}},{key:"searchRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isDestroyed())return Promise.reject();var t=e.fields,r=t||C.e;return this.errorCode=j.ub,this.xhr.get({url:this.getUrl(),params:{offset:this.offset,query:this.query,ancestor_folder_ids:this.id,limit:this.limit,fields:r.toString()},headers:r.includes(j.rc)?{"X-Rep-Hints":j.Ne}:{}}).then(this.searchSuccessHandler).catch(this.searchErrorHandler)}},{key:"search",value:function(e,t,r,n,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};this.isDestroyed()||(this.limit=r,this.offset=n,this.query=t,this.id=e,this.key=this.getCacheKey(e,this.getEncodedQuery(this.query)),this.successCallback=o,this.errorCallback=i,a.forceFetch&&this.getCache().unset(this.key),this.isLoaded()?this.finish():this.searchRequest(a))}}])&&x(r.prototype,n),o&&x(r,o),t}(S.a);function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?B(e):t}(this,(e=F(t)).call.apply(e,[this].concat(o))),W(B(r),"recentsSuccessHandler",(function(e){var t=e.data;if(!r.isDestroyed()){var n=t.entries,o=t.order,i=o.by,a=o.direction,s=[];n.forEach((function(e){var t=e.item,n=e.interacted_at,o=t.path_collection;(r.id===j.I||!!o&&-1!==o.entries.findIndex((function(e){return e.id===r.id})))&&s.push(H(t,{interacted_at:n}))}));var c=Object(P.a)(s,new k.a(r.options),new O.a(r.options),new w.a(r.options));r.getCache().set(r.key,{item_collection:{entries:c,order:[{by:i,direction:a}]}}),r.finish()}})),W(B(r),"recentsErrorHandler",(function(e){r.isDestroyed()||r.errorCallback(e,r.errorCode)})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(j.i).concat(e)}},{key:"getUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/recent_items")}},{key:"finish",value:function(){if(!this.isDestroyed()){var e=this.getCache(),t=e.get(this.key).item_collection;if(!t)throw Object(_.a)();var r=t.entries;if(!Array.isArray(r))throw Object(_.a)();var n={id:this.id,items:r.map((function(t){return e.get(t)})),percentLoaded:100,sortBy:j.Rb,sortDirection:j.ee};this.successCallback(n)}}},{key:"recentsRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.isDestroyed())return Promise.reject();var t=e.fields,r=t||C.e;return this.errorCode=j.gb,this.xhr.get({url:this.getUrl(),params:{fields:r.toString()},headers:r.includes(j.rc)?{"X-Rep-Hints":j.Ne}:{}}).then(this.recentsSuccessHandler).catch(this.recentsErrorHandler)}},{key:"recents",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.isDestroyed()){this.id=e,this.successCallback=t,this.errorCallback=r;var o=this.getCache();this.key=this.getCacheKey(this.id),n.forceFetch&&o.unset(this.key),o.has(this.key)?this.finish():this.recentsRequest(n)}}}])&&L(r.prototype,n),o&&L(r,o),t}(S.a),X=r("mwIZSSbMl2"),G=r.n(X),K=r("a2jX1cNsCJ");function J(e){return(J="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){Y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function $(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Z(i,n,o,a,s,"next",e)}function s(e){Z(i,n,o,a,s,"throw",e)}a(void 0)}))}}function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return!t||"object"!==J(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var oe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(this,re(t).apply(this,arguments))}var r,n,o,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(t,e),r=t,(n=[{key:"getQueryParameters",value:function(e,t,r){var n={offset:e,limit:t};return r&&r.length>0&&(n.fields=r.toString()),n}},{key:"hasMoreItems",value:function(e,t){return void 0===t||e<t}},{key:"offsetGetRequest",value:(a=$(regeneratorRuntime.mark((function e(t,r,n,o,i){var a,s,c,u,l,f,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a=this.getQueryParameters(r,n,i),s=this.getUrl(t),e.next=7,this.xhr.get({url:s,id:Object(K.a)(t),params:a});case 7:if(c=e.sent,u=c.data,l=this.data?this.data.entries:[],this.data=Q({},u,{entries:l.concat(u.entries)}),f=u.total_count,p=r+n,!o||!this.hasMoreItems(p,f)){e.next=16;break}return this.offsetGetRequest(t,p,n,o,i),e.abrupt("return");case 16:this.successHandler(this.data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),this.errorHandler(e.t0);case 22:case"end":return e.stop()}}),e,this,[[2,19]])}))),function(e,t,r,n,o){return a.apply(this,arguments)})},{key:"offsetGet",value:(i=$(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,s,c=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=c.length>3&&void 0!==c[3]?c[3]:j.y,i=c.length>4&&void 0!==c[4]?c[4]:j.x,a=c.length>5?c[5]:void 0,s=!(c.length>6&&void 0!==c[6])||c[6],this.successCallback=r,this.errorCallback=n,e.abrupt("return",this.offsetGetRequest(t,o,i,s,a));case 7:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return i.apply(this,arguments)})}])&&ee(r.prototype,n),o&&ee(r,o),t}(S.a);function ie(e){return(ie="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){de(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ye=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==ie(t)&&"function"!==typeof t?pe(e):t}(this,(e=fe(t)).call.apply(e,[this].concat(o))),de(pe(r),"successHandler",(function(e){r.isDestroyed()||"function"!==typeof r.successCallback||r.successCallback(e)})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getBaseApiUrl(),"/files/").concat(e,"/versions")}},{key:"getVersionUrl",value:function(e,t){if(!t)throw new Error("Missing version id!");return"".concat(this.getUrl(e),"/").concat(t)}},{key:"addPermissions",value:function(e,t){if(!e)return e;var r=e.entries,n=e.total_count,o=G()(t,["permissions",j.Fd],!1);return{entries:r.map((function(e){var t=e.permissions;return ce({},ue(e,["permissions"]),{permissions:ce({can_upload:o},t)})})),total_count:n}}},{key:"deleteVersion",value:function(e){var t=e.errorCallback,r=e.fileId,n=e.permissions,o=e.successCallback,i=e.versionId;this.errorCode=j.V;try{this.checkApiCallValidity(j.Dd,n,r)}catch(e){return void t(e,this.errorCode)}this.delete({id:r,url:this.getVersionUrl(r,i),successCallback:o,errorCallback:t})}},{key:"getVersions",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:j.y,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.x,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:C.c,a=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];this.errorCode=j.lb,this.offsetGet(e,t,r,n,o,i,a)}},{key:"getVersion",value:function(e,t,r,n){this.errorCode=j.kb,this.get({id:e,successCallback:r,errorCallback:n,url:this.getVersionUrl(e,t),requestData:{params:{fields:C.c.toString()}}})}},{key:"addCurrentVersion",value:function(e,t,r){if(!e)return t||{entries:[],total_count:0};if(!t)return{entries:[e],total_count:1};var n=G()(r,"restored_from.id"),o=t.entries.find((function(e){return e.id===n}));return o&&(e.version_promoted=o.version_number),{entries:[].concat(ae(t.entries),[e]),total_count:t.total_count+1}}},{key:"promoteVersion",value:function(e){var t=e.errorCallback,r=e.fileId,n=e.permissions,o=e.successCallback,i=e.versionId;this.errorCode=j.rb;try{this.checkApiCallValidity(j.Fd,n,r)}catch(e){return void t(e,this.errorCode)}this.post({id:r,data:{data:{id:i,type:"file_version"}},url:this.getVersionUrl(r,"current"),successCallback:o,errorCallback:t})}},{key:"restoreVersion",value:function(e){var t=e.errorCallback,r=e.fileId,n=e.permissions,o=e.successCallback,i=e.versionId;this.errorCode=j.tb;try{this.checkApiCallValidity(j.Dd,n,r)}catch(e){return void t(e,this.errorCode)}this.put({id:r,data:{data:{trashed_at:null}},url:this.getVersionUrl(r,i),successCallback:o,errorCallback:t})}}])&&le(r.prototype,n),o&&le(r,o),t}(oe);function be(e){return(be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?me(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ce=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?Oe(e):t}(this,(e=ke(t)).call.apply(e,[this].concat(o))),Pe(Oe(r),"successHandler",(function(e){if(!r.isDestroyed()&&"function"===typeof r.successCallback)if(e)if(e.entries){var t=e.entries.map(r.format);r.successCallback(ve({},e,{entries:t}))}else r.successCallback(r.format(e));else r.successCallback()})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getBaseApiUrl(),"/files/").concat(e,"/comments")}},{key:"commentsUrl",value:function(e){var t="".concat(this.getBaseApiUrl(),"/comments");return e?"".concat(t,"/").concat(e):t}},{key:"format",value:function(e){return ve({},e,{tagged_message:""!==e.tagged_message?e.tagged_message:e.message})}},{key:"createComment",value:function(e){var t=e.file,r=e.message,n=e.taggedMessage,o=e.successCallback,i=e.errorCallback;this.errorCode=j.J;var a=t.id,s=void 0===a?"":a,c=t.permissions;try{this.checkApiCallValidity(j.Cd,c,s)}catch(e){return void i(e,this.errorCode)}var u={data:{item:{id:s,type:"file"},message:r,tagged_message:n},params:{fields:C.b.toString()}};this.post({id:s,url:this.commentsUrl(),data:u,successCallback:o,errorCallback:i})}},{key:"updateComment",value:function(e){var t=e.file,r=e.commentId,n=e.message,o=e.tagged_message,i=e.permissions,a=e.successCallback,s=e.errorCallback;this.errorCode=j.yb;var c=t.id,u=void 0===c?"":c;try{this.checkApiCallValidity(j.Ed,i,u)}catch(e){return void s(e,this.errorCode)}var l={data:{message:n,tagged_message:o}};this.put({id:u,url:this.commentsUrl(r),data:l,successCallback:a,errorCallback:s})}},{key:"deleteComment",value:function(e){var t=e.file,r=e.commentId,n=e.permissions,o=e.successCallback,i=e.errorCallback;this.errorCode=j.Q;var a=t.id,s=void 0===a?"":a;try{this.checkApiCallValidity(j.Dd,n,s)}catch(e){return void i(e,this.errorCode)}this.delete({id:s,url:this.commentsUrl(r),successCallback:o,errorCallback:i})}},{key:"getComments",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.b,i=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;this.errorCode=j.Y;try{this.checkApiCallValidity(j.Cd,t,e)}catch(e){return void n(e,this.errorCode)}this.offsetGet(e,r,n,i,a,o,s)}}])&&ge(r.prototype,n),o&&ge(r,o),t}(oe);function _e(e){return(_e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ee(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Ae(e,t){return!t||"object"!==_e(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Re=[j.bd,j.Yc,j.ad,j.Uc,j.cd,j.Xc],Te=function(e){function t(e){var r=e.retryableStatusCodes,n=void 0===r?Re:r,o=Ee(e,["retryableStatusCodes"]);return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,Ie(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},o,{retryableStatusCodes:n})))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(t,e),t}(S.a);function De(e){return(De="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Me(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(r),!0).forEach((function(t){Ne(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e,t){return!t||"object"!==De(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Le(this,Fe(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(t,e),r=t,(n=[{key:"getUrlForFileTasks",value:function(e){return"".concat(this.getBaseApiUrl(),"/undoc/files/").concat(e,"/linked_tasks?limit=").concat(j.b)}},{key:"getUrlForTaskCreate",value:function(){return"".concat(this.getBaseApiUrl(),"/undoc/tasks")}},{key:"getUrlForTask",value:function(e){return"".concat(this.getBaseApiUrl(),"/undoc/tasks/").concat(e)}},{key:"createTask",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task;this.errorCode=j.M,this.post({id:r.id,url:this.getUrlForTaskCreate(),data:{data:Me({},o)},successCallback:n,errorCallback:t})}},{key:"updateTask",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task;this.errorCode=j.Bb,this.put({id:r.id,url:this.getUrlForTask(o.id),data:{data:Me({},o)},successCallback:n,errorCallback:t})}},{key:"deleteTask",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task;this.errorCode=j.T,this.delete({id:r.id,url:this.getUrlForTask(o.id),successCallback:n,errorCallback:t})}},{key:"getTasksForFile",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback;this.errorCode=j.ib,this.get({id:r.id,url:this.getUrlForFileTasks(r.id),successCallback:n,errorCallback:t})}},{key:"getTask",value:function(e){var t=e.errorCallback,r=e.file,n=e.id,o=e.successCallback;this.errorCode=j.ib,this.get({id:r.id,url:this.getUrlForTask(n),successCallback:o,errorCallback:t})}}])&&He(r.prototype,n),o&&He(r,o),t}(Te),We=r("PuqeRHPhsD"),ze=r.n(We);function Xe(e){return(Xe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach((function(t){Je(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Je(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return!t||"object"!==Xe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var $e=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Qe(this,Ye(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ze(e,t)}(t,e),r=t,(n=[{key:"getUrlForTaskCollaborators",value:function(e){return"".concat(this.getBaseApiUrl(),"/undoc/tasks/").concat(e,"/task_collaborators?role=ASSIGNEE&limit=").concat(j.b)}},{key:"getUrlForTaskCollaboratorCreate",value:function(){return"".concat(this.getBaseApiUrl(),"/undoc/task_collaborators")}},{key:"getUrlForTaskCollaborator",value:function(e){return"".concat(this.getBaseApiUrl(),"/undoc/task_collaborators/").concat(e)}},{key:"getUrlForTaskGroupCreate",value:function(){return"".concat(this.getBaseApiUrl(),"/undoc/task_collaborators/expand_group")}},{key:"createTaskCollaborator",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task,i=e.user;this.errorCode=j.N;var a={data:{task:{type:"task",id:o.id},target:{type:"user",id:i.id}}};this.post({id:r.id,url:this.getUrlForTaskCollaboratorCreate(),data:Ke({},a),successCallback:n,errorCallback:t})}},{key:"createTaskCollaboratorsforGroup",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task,i=e.group;this.errorCode=j.N;var a={data:{task:{type:"task",id:o.id},target:{type:"group",id:i.id}}};this.post({id:r.id,url:this.getUrlForTaskGroupCreate(),data:Ke({},a),successCallback:n,errorCallback:t})}},{key:"getTaskCollaborators",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task;this.errorCode=j.jb;var i=this.getUrlForTaskCollaborators(o.id);this.get({id:r.id,successCallback:n,errorCallback:t,url:i})}},{key:"updateTaskCollaborator",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.taskCollaborator;this.errorCode=j.Cb;var i={data:ze()(o,"id")};this.put({id:r.id,url:this.getUrlForTaskCollaborator(o.id),data:Ke({},i),successCallback:n,errorCallback:t})}},{key:"deleteTaskCollaborator",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.taskCollaborator;this.errorCode=j.U,this.delete({id:r.id,url:this.getUrlForTaskCollaborator(o.id),successCallback:n,errorCallback:t})}}])&&Ve(r.prototype,n),o&&Ve(r,o),t}(Te);function et(e){return(et="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e,t){return!t||"object"!==et(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,at(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(t,e),r=t,(n=[{key:"getUrlForTaskLinkCreate",value:function(){return"".concat(this.getBaseApiUrl(),"/undoc/task_links")}},{key:"createTaskLink",value:function(e){var t=e.errorCallback,r=e.file,n=e.successCallback,o=e.task;this.errorCode=j.O;var i={data:{target:{id:r.id,type:"file"},task:{id:o.id,type:"task"}}};this.post({id:r.id,url:this.getUrlForTaskLinkCreate(),data:rt({},i),successCallback:n,errorCallback:t})}}])&&ot(r.prototype,n),o&&ot(r,o),t}(Te);function ut(e){return(ut="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ft(e,t){return!t||"object"!==ut(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,pt(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getBaseApiUrl(),"/file_access_stats/").concat(e)}},{key:"getFileAccessStats",value:function(e,t,r){this.errorCode=j.X,this.get({id:e,successCallback:t,errorCallback:r})}}])&&lt(r.prototype,n),o&&lt(r,o),t}(S.a),yt=r("cr+IVGIN9M"),bt=r.n(yt),mt=r("vVaM4hVnXJ");function vt(e){return(vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ot(e,t){return!t||"object"!==vt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pt(e,t){return(Pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ot(this,wt(t).apply(this,arguments))}var r,n,o,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pt(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/users/me")}},{key:"getAvatarUrl",value:function(e){if(!e)throw new Error("Missing user id");return"".concat(this.getBaseApiUrl(),"/users/").concat(e,"/avatar")}},{key:"getAvatarUrlWithAccessToken",value:(i=regeneratorRuntime.mark((function e(t,r){var n,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:if(!(n=this.getCache()).has(t)){e.next=5;break}return e.abrupt("return",n.get(t));case 5:return e.next=7,mt.a.getReadToken(Object(K.a)(r),this.options.token);case 7:if("string"!==typeof(o=e.sent)){e.next=14;break}return i={access_token:o,pic_type:"large"},a=bt.a.stringify(i),s="".concat(this.getAvatarUrl(t),"?").concat(a),n.set(t,s),e.abrupt("return",s);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(r,n){var o=i.apply(e,t);function a(e){gt(o,r,n,a,s,"next",e)}function s(e){gt(o,r,n,a,s,"throw",e)}a(void 0)}))},function(e,t){return a.apply(this,arguments)})},{key:"getUser",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.errorCode=j.Z,this.get({id:e,successCallback:t,errorCallback:r,requestData:n})}}])&&kt(r.prototype,n),o&&kt(r,o),t}(S.a),_t=r("mNz5hShaC3"),St=r.n(_t);function jt(e){return(jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function At(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function It(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function xt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){It(i,n,o,a,s,"next",e)}function s(e){It(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Rt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tt(e,t){return!t||"object"!==jt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tt(this,Dt(t).apply(this,arguments))}var r,n,o,i,a,s,c,u,l,f,p,h,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(t,e),r=t,(n=[{key:"getMetadataCacheKey",value:function(e){return"".concat(j.g).concat(e)}},{key:"getSkillsCacheKey",value:function(e){return"".concat(this.getMetadataCacheKey(e),"_skills")}},{key:"getClassificationCacheKey",value:function(e){return"".concat(this.getMetadataCacheKey(e),"_classification")}},{key:"getMetadataUrl",value:function(e,t,r){var n="".concat(this.getUrl(e),"/metadata");return t&&r?"".concat(n,"/").concat(t,"/").concat(r):n}},{key:"getMetadataTemplateUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/metadata_templates")}},{key:"getMetadataTemplateUrlForInstance",value:function(e){return"".concat(this.getMetadataTemplateUrl(),"?metadata_instance_id=").concat(e)}},{key:"getMetadataTemplateSchemaUrl",value:function(e){return"".concat(this.getMetadataTemplateUrl(),"/enterprise/").concat(e,"/schema")}},{key:"getMetadataTemplateUrlForScope",value:function(e){return"".concat(this.getMetadataTemplateUrl(),"/").concat(e)}},{key:"getCustomPropertiesTemplate",value:function(){return{id:St()("metadata_template_"),scope:j.hd,templateKey:j.kd,hidden:!1}}},{key:"createEditor",value:function(e,t,r){var n={};return Object.keys(e).forEach((function(t){t.startsWith("$")||(n[t]=e[t])})),{template:t,instance:{id:e.$id,canEdit:e.$canEdit&&r,data:n}}}},{key:"getTemplates",value:(d=xt(regeneratorRuntime.mark((function e(t,r,n){var o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorCode=j.fb,o={},i=n?this.getMetadataTemplateUrlForInstance(n):this.getMetadataTemplateUrlForScope(r),e.prev=3,e.next=6,this.xhr.get({url:i,id:Object(K.a)(t),params:{limit:j.jd}});case 6:o=e.sent,e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(3),a=e.t0.status,!Object(_.d)(a)){e.next=14;break}throw e.t0;case 14:return e.abrupt("return",G()(o,"data.entries",[]));case 15:case"end":return e.stop()}}),e,this,[[3,9]])}))),function(e,t,r){return d.apply(this,arguments)})},{key:"getSchemaByTemplateKey",value:function(e){var t=this.getMetadataTemplateSchemaUrl(e);return this.xhr.get({url:t})}},{key:"getInstances",value:(h=xt(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorCode=j.eb,r={},e.prev=2,e.next=5,this.xhr.get({url:this.getMetadataUrl(t),id:Object(K.a)(t)});case 5:r=e.sent,e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(2),n=e.t0.status,!Object(_.d)(n)){e.next=13;break}throw e.t0;case 13:return e.abrupt("return",G()(r,"data.entries",[]));case 14:case"end":return e.stop()}}),e,this,[[2,8]])}))),function(e){return h.apply(this,arguments)})},{key:"getUserAddableTemplates",value:function(e,t,r,n){var o=[];return r&&(o=n?[e]:[e].concat(t)),o.filter((function(e){return!e.hidden&&e.templateKey!==j.id}))}},{key:"extractClassification",value:function(e,t){var r=t.find((function(e){return e.$template===j.id}));if(r){t.splice(t.indexOf(r),1);var n=this.getCache(),o=this.getClassificationCacheKey(e);n.set(o,r)}return t}},{key:"getTemplateForInstance",value:(p=xt(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=r.$id,i=r.$template,a=r.$scope,(s=n.find((function(e){return e.templateKey===i&&e.scope===a})))||!a.startsWith(j.gd)){e.next=9;break}return e.next=7,this.getTemplates(t,a,o);case 7:c=e.sent,s=c[0];case 9:return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return p.apply(this,arguments)})},{key:"getEditors",value:(f=xt(regeneratorRuntime.mark((function e(t,r,n,o,i,a){var s,c,u,l=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=[n].concat(o,i),c=this.extractClassification(t,r),u=[],e.next=5,Promise.all(c.map(function(){var e=xt(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.getTemplateForInstance(t,r,s);case 2:(n=e.sent)&&u.push(l.createEditor(r,n,a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",u);case 6:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n,o,i){return f.apply(this,arguments)})},{key:"getMetadata",value:(l=xt(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,c,u,l,f,p,h,d,y,b,m,v,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.length>4&&void 0!==g[4]?g[4]:{},a=t.id,s=t.permissions,c=t.is_externally_owned,this.errorCode=j.eb,this.successCallback=r,this.errorCallback=n,a&&s){e.next=8;break}return this.errorHandler(Object(_.a)()),e.abrupt("return");case 8:if(u=this.getCache(),l=this.getMetadataCacheKey(a),i.forceFetch&&u.unset(l),!u.has(l)){e.next=15;break}if(this.successHandler(u.get(l)),i.refreshCache){e.next=15;break}return e.abrupt("return");case 15:return e.prev=15,f=this.getCustomPropertiesTemplate(),e.next=19,Promise.all([this.getInstances(a),this.getTemplates(a,j.hd),o?this.getTemplates(a,j.gd):Promise.resolve([])]);case 19:return p=e.sent,h=At(p,3),d=h[0],y=h[1],b=h[2],e.next=26,this.getEditors(a,d,f,b,y,!!s.can_upload);case 26:m=e.sent,v={editors:m,templates:this.getUserAddableTemplates(f,b,o,c)},u.set(l,v),this.isDestroyed()||this.successHandler(v),e.next=35;break;case 32:e.prev=32,e.t0=e.catch(15),this.errorHandler(e.t0);case 35:case"end":return e.stop()}}),e,this,[[15,32]])}))),function(e,t,r,n){return l.apply(this,arguments)})},{key:"getSkills",value:(u=xt(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,s,c,u,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=l.length>3&&void 0!==l[3]&&l[3],this.errorCode=j.hb,i=t.id){e.next=6;break}return n(Object(_.a)(),this.errorCode),e.abrupt("return");case 6:if(a=this.getCache(),s=this.getSkillsCacheKey(i),this.successCallback=r,this.errorCallback=n,o&&a.unset(s),!a.has(s)){e.next=14;break}return this.successHandler(a.get(s)),e.abrupt("return");case 14:if(c={data:G()(t,j.fc)},e.prev=15,c.data){e.next=20;break}return e.next=19,this.xhr.get({url:this.getMetadataUrl(i,j.hd,j.ld),id:Object(K.a)(i)});case 19:c=e.sent;case 20:this.isDestroyed()||(u=c.data.cards||[],a.set(s,u),this.successHandler(u)),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(15),this.errorHandler(e.t0);case 26:case"end":return e.stop()}}),e,this,[[15,23]])}))),function(e,t,r){return u.apply(this,arguments)})},{key:"updateSkills",value:(c=xt(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.errorCode=j.Ab,i=t.id,a=t.permissions,i&&a){e.next=5;break}return o(Object(_.a)(),this.errorCode),e.abrupt("return");case 5:if(a.can_upload){e.next=8;break}return o(Object(_.b)(),this.errorCode),e.abrupt("return");case 8:return this.successCallback=n,this.errorCallback=o,e.prev=10,e.next=13,this.xhr.put({url:this.getMetadataUrl(i,j.hd,j.ld),headers:Et({},j.Nc,"application/json-patch+json"),id:Object(K.a)(i),data:r});case 13:s=e.sent,this.isDestroyed()||(c=s.data.cards||[],this.merge(this.getCacheKey(i),j.fc,s.data),this.getCache().set(this.getSkillsCacheKey(i),c),this.successHandler(c)),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(10),this.errorHandler(e.t0);case 20:case"end":return e.stop()}}),e,this,[[10,17]])}))),function(e,t,r,n){return c.apply(this,arguments)})},{key:"updateMetadata",value:(s=xt(regeneratorRuntime.mark((function e(t,r,n,o,i){var a,s,c,u,l,f,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.errorCode=j.zb,this.successCallback=o,this.errorCallback=i,a=t.id,s=t.permissions,a&&s){e.next=7;break}return this.errorHandler(Object(_.a)()),e.abrupt("return");case 7:if(c=!!s.can_upload){e.next=11;break}return this.errorHandler(Object(_.b)()),e.abrupt("return");case 11:return e.prev=11,e.next=14,this.xhr.put({url:this.getMetadataUrl(a,r.scope,r.templateKey),headers:Et({},j.Nc,"application/json-patch+json"),id:Object(K.a)(a),data:n});case 14:u=e.sent,this.isDestroyed()||(l=this.getCache(),f=this.getMetadataCacheKey(a),p=l.get(f),h=this.createEditor(u.data,r,c),p&&p.editors&&p.editors.splice(p.editors.findIndex((function(e){return e.instance.id===h.instance.id})),1,h),this.successHandler(h)),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(11),this.errorHandler(e.t0);case 21:case"end":return e.stop()}}),e,this,[[11,18]])}))),function(e,t,r,n,o){return s.apply(this,arguments)})},{key:"createMetadata",value:(a=xt(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,c,u,l,f,p,h,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.errorCode=j.L,t&&r){e.next=4;break}return o(Object(_.a)(),this.errorCode),e.abrupt("return");case 4:if(i=t.id,a=t.permissions,s=t.is_externally_owned,i&&a){e.next=8;break}return o(Object(_.a)(),this.errorCode),e.abrupt("return");case 8:if(c=!!a.can_upload,u=r.templateKey===j.kd&&r.scope===j.hd,c&&(!s||u)){e.next=13;break}return o(Object(_.b)(),this.errorCode),e.abrupt("return");case 13:return this.successCallback=n,this.errorCallback=o,e.prev=15,e.next=18,this.xhr.post({url:this.getMetadataUrl(i,r.scope,r.templateKey),id:Object(K.a)(i),data:{}});case 18:l=e.sent,this.isDestroyed()||(f=this.getCache(),p=this.getMetadataCacheKey(i),h=f.get(p),d=this.createEditor(l.data,r,c),h.editors.push(d),this.successHandler(d)),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(15),this.errorHandler(e.t0);case 25:case"end":return e.stop()}}),e,this,[[15,22]])}))),function(e,t,r,n){return a.apply(this,arguments)})},{key:"deleteMetadata",value:(i=xt(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.errorCode=j.S,t&&r){e.next=4;break}return o(Object(_.a)(),this.errorCode),e.abrupt("return");case 4:if(i=r.scope,a=r.templateKey,s=t.id,c=t.permissions,s&&c){e.next=9;break}return o(Object(_.a)(),this.errorCode),e.abrupt("return");case 9:if(c.can_upload){e.next=12;break}return o(Object(_.b)(),this.errorCode),e.abrupt("return");case 12:return this.successCallback=n,this.errorCallback=o,e.prev=14,e.next=17,this.xhr.delete({url:this.getMetadataUrl(s,i,a),id:Object(K.a)(s)});case 17:this.isDestroyed()||(u=this.getCache(),l=this.getMetadataCacheKey(s),(f=u.get(l)).editors.splice(f.editors.findIndex((function(e){return e.template.scope===i&&e.template.templateKey===a})),1),this.successHandler()),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(14),this.errorHandler(e.t0);case 23:case"end":return e.stop()}}),e,this,[[14,20]])}))),function(e,t,r,n){return i.apply(this,arguments)})}])&&Rt(r.prototype,n),o&&Rt(r,o),t}(O.a);function Nt(e){return(Nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ht(Object(r),!0).forEach((function(t){Ft(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ht(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ft(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bt(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function qt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){Bt(i,n,o,a,s,"next",e)}function s(e){Bt(i,n,o,a,s,"throw",e)}a(void 0)}))}}function Wt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zt(e,t){return!t||"object"!==Nt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Kt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),zt(this,Xt(t).apply(this,arguments))}var r,n,o,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gt(e,t)}(t,e),r=t,(n=[{key:"hasMoreItems",value:function(e){return null!==e&&""!==e}},{key:"markerGetRequest",value:(a=qt(regeneratorRuntime.mark((function e(t,r,n,o){var i,a,s,c,u,l,f,p=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.length>4&&void 0!==p[4]?p[4]:{},!this.isDestroyed()){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,a=this.getUrl(t),s=Lt({},i,{marker:r,limit:n}),e.next=8,this.xhr.get({url:a,id:Object(K.a)(t),params:s});case 8:if(c=e.sent,u=c.data,l=this.data?this.data.entries:[],this.data=Lt({},u,{entries:l.concat(u.entries)}),f=u.next_marker,!o||!this.hasMoreItems(f)){e.next=16;break}return this.markerGetRequest(t,f,n,o,i),e.abrupt("return");case 16:this.successHandler(this.data),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),this.errorHandler(e.t0);case 22:case"end":return e.stop()}}),e,this,[[3,19]])}))),function(e,t,r,n){return a.apply(this,arguments)})},{key:"markerGet",value:(i=qt(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,u,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.id,n=t.successCallback,o=t.errorCallback,i=t.marker,a=void 0===i?"":i,s=t.limit,c=void 0===s?1e3:s,u=t.requestData,l=t.shouldFetchAll,f=void 0===l||l,this.successCallback=n,this.errorCallback=o,e.abrupt("return",this.markerGetRequest(r,a,c,f,u));case 4:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})}])&&Wt(r.prototype,n),o&&Wt(r,o),t}(S.a);function Jt(e){return(Jt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function er(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tr=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==Jt(t)&&"function"!==typeof t?Zt(e):t}(this,(e=Yt(t)).call.apply(e,[this].concat(o))),er(Zt(r),"successHandler",(function(e){if(!r.isDestroyed()&&"function"===typeof r.successCallback){var t=e.entries.map((function(e){var t;return"group"===e.type?t=e:(t=e).email=t.login,{id:e.id,name:e.name,item:t}}));r.successCallback(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(r),!0).forEach((function(t){er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{entries:t}))}})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getBaseApiUrl(),"/files/").concat(e,"/collaborators")}},{key:"getFileCollaborators",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:j.E;this.markerGet({id:e,limit:o,successCallback:t,errorCallback:r,requestData:n})}}])&&Qt(r.prototype,n),o&&Qt(r,o),t}(Kt),rr=r("TYy9hCwbQY"),nr=r.n(rr),or=r("rXqiGNCH6O"),ir=r("zJHzwnUt45");function ar(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return t?e.concat(t.entries):e}),[]).sort((function(e,t){return Date.parse(e.created_at)-Date.parse(t.created_at)}))}function sr(e){return(sr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fr(e,t){return(fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hr=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==sr(t)&&"function"!==typeof t?lr(e):t}(this,(e=ur(t)).call.apply(e,[this].concat(o))),pr(lr(r),"permissions",{}),pr(lr(r),"mapAppActivityItem",(function(e){var t=e.activity_template,n=e.app,o=e.created_by,i=e.id,a=e.occurred_at,s=e.rendered_text,c=e.type;return{activity_template:t,app:n,created_at:a,created_by:o,id:i,permissions:{can_delete:r.permissions.can_delete},rendered_text:s,type:c}})),pr(lr(r),"successHandler",(function(e){var t=e.entries,n=void 0===t?[]:t;if(!r.isDestroyed()&&"function"===typeof r.successCallback){var o=n.map(r.mapAppActivityItem);r.successCallback({entries:o,total_count:o.length})}})),pr(lr(r),"errorHandler",(function(e){if(!r.isDestroyed()||"function"===typeof r.errorCallback){var t=e.response;t.status===j.Zc?r.successHandler({entries:[],total_count:0}):r.errorCallback(e,t.status)}})),r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fr(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/app_activities")}},{key:"getDeleteUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getUrl(),"/").concat(e)}},{key:"getAppActivity",value:function(e,t,r,n){var o={item_id:e,item_type:"file",fields:C.a.toString()};this.permissions=t,this.markerGet({id:e,successCallback:r,errorCallback:n,requestData:o})}},{key:"deleteAppActivity",value:function(e){var t=e.id,r=e.appActivityId,n=e.successCallback,o=e.errorCallback;this.errorCode=j.P,this.delete({id:t,url:this.getDeleteUrl(r),successCallback:n,errorCallback:o})}}])&&cr(r.prototype,n),o&&cr(r,o),t}(Kt);function dr(e){return(dr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yr(e){return function(e){if(Array.isArray(e))return e}(e)||mr(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function br(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||mr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function mr(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function vr(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function gr(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){vr(i,n,o,a,s,"next",e)}function s(e){vr(i,n,o,a,s,"throw",e)}a(void 0)}))}}function kr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Or(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(r),!0).forEach((function(t){jr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cr(e,t,r){return(Cr="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_r(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sr(e,t){return(Sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Er=j.re,Ar="task",Ir=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,t){return!t||"object"!==dr(t)&&"function"!==typeof t?Pr(e):t}(this,_r(t).call(this,e)),jr(Pr(r),"updateTaskCollaborator",(function(e,t,n,o,i,a){if(!e.id)throw Object(_.a)();r.file=e,r.errorCallback=a,r.updateFeedItem({isPending:!0},t);var s=new $e(r.options);r.taskCollaboratorsAPI.push(s);var c={id:n,status:o},u=function(e,n){var i;switch(o){case j.oe:i=ir.a.taskApproveErrorMessage;break;case j.pe:i=ir.a.taskCompleteErrorMessage;break;case j.se:i=ir.a.taskRejectErrorMessage;break;default:i=ir.a.taskCompleteErrorMessage}r.updateFeedItem(r.createFeedError(i,ir.a.taskActionErrorTitle),t),r.feedErrorCallback(!0,e,n)};s.updateTaskCollaborator({file:e,taskCollaborator:c,successCallback:function(n){r.updateTaskCollaboratorSuccessCallback(t,e,n,i,u)},errorCallback:u})})),jr(Pr(r),"updateTaskCollaboratorSuccessCallback",(function(e,t,n,o,i){r.tasksNewAPI=new qe(r.options),r.tasksNewAPI.getTask({id:e,file:t,successCallback:function(t){r.updateFeedItem(Or({},t,{isPending:!1}),e),o(n)},errorCallback:i})})),jr(Pr(r),"updateTaskNew",function(){var e=gr(regeneratorRuntime.mark((function e(t,n){var o,i,s,c,u=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=u.length>2&&void 0!==u[2]?u[2]:a.a,i=u.length>3&&void 0!==u[3]?u[3]:a.a,t.id){e.next=4;break}throw Object(_.a)();case 4:return s=!0,r.file=t,r.errorCallback=i,r.tasksNewAPI=new qe(r.options),r.updateFeedItem({isPending:!0},n.id),e.prev=9,e.next=12,Promise.all(n.addedAssignees.map((function(e){return e.item&&"group"===e.item.type?r.createTaskCollaboratorsforGroup(t,n,e):r.createTaskCollaborator(t,n,e)})));case 12:return e.next=14,new Promise((function(e,o){r.tasksNewAPI.updateTask({file:t,task:n,successCallback:e,errorCallback:o})}));case 14:return e.next=16,Promise.all(n.removedAssignees.map((function(e){return r.deleteTaskCollaborator(t,n,e)}))).catch((function(e){s=!1,c=e}));case 16:return e.next=18,new Promise((function(e,o){r.tasksNewAPI.getTask({file:t,id:n.id,successCallback:function(t){r.updateFeedItem(Or({},t,{isPending:!1}),n.id),s||r.feedErrorCallback(!1,c,j.Bb),e()},errorCallback:function(e){r.updateFeedItem({isPending:!1},n.id),r.feedErrorCallback(!1,e,j.Bb),o()}})}));case 18:!r.isDestroyed()&&s&&o(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(9),r.updateFeedItem({isPending:!1},n.id),r.feedErrorCallback(!1,e.t0,j.Bb);case 25:case"end":return e.stop()}}),e,null,[[9,21]])})));return function(t,r){return e.apply(this,arguments)}}()),jr(Pr(r),"deleteComment",(function(e,t,n,o,i){if(r.commentsAPI=new Ce(r.options),!e.id)throw Object(_.a)();r.file=e,r.errorCallback=i,r.updateFeedItem({isPending:!0},t),r.commentsAPI.deleteComment({file:e,commentId:t,permissions:n,successCallback:r.deleteFeedItem.bind(Pr(r),t,o),errorCallback:function(e,n){r.deleteCommentErrorCallback(e,n,t)}})})),jr(Pr(r),"deleteCommentErrorCallback",(function(e,t,n){r.updateFeedItem(r.createFeedError(ir.a.commentDeleteErrorMessage),n),r.feedErrorCallback(!0,e,t)})),jr(Pr(r),"createTaskNew",(function(e,t,n,o,i,a,s,c,u){if(!e.id)throw Object(_.a)();r.file=e,r.errorCallback=u;var l,f=St()("task_");a&&(l=new Date(a).toISOString());var p={created_by:{type:"task_collaborator",target:t,id:St()(),role:"CREATOR",status:Er},completion_rule:s,created_at:(new Date).toISOString(),due_at:l,id:f,description:n,type:Ar,assigned_to:{entries:o.map((function(e){return{id:St()(),target:Or({},e,{avatar_url:"",type:"user"}),status:Er,permissions:{can_delete:!1,can_update:!1},role:"ASSIGNEE",type:"task_collaborator"}})),limit:10,next_marker:null},permissions:{can_update:!1,can_delete:!1,can_create_task_collaborator:!1,can_create_task_link:!1},task_links:{entries:[{id:St()(),type:"task_link",target:Or({type:"file"},e),permissions:{can_delete:!1,can_update:!1}}],limit:1,next_marker:null},task_type:i,status:j.re},h={description:n,due_at:l,task_type:i,completion_rule:s};r.tasksNewAPI=new qe(r.options),r.tasksNewAPI.createTask({file:e,task:h,successCallback:function(n){r.addPendingItem(r.file.id,t,p),r.createTaskNewSuccessCallback(e,f,n,o,c,u)},errorCallback:function(e,t){r.feedErrorCallback(!1,e,t)}})})),jr(Pr(r),"deleteTaskNew",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.a;if(!e.id)throw Object(_.a)();r.file=e,r.errorCallback=o,r.tasksNewAPI=new qe(r.options),r.updateFeedItem({isPending:!0},t.id),r.tasksNewAPI.deleteTask({file:e,task:t,successCallback:r.deleteFeedItem.bind(Pr(r),t.id,n),errorCallback:function(e,n){r.updateFeedItem(r.createFeedError(ir.a.taskDeleteErrorMessage),t.id),r.feedErrorCallback(!0,e,n)}})})),jr(Pr(r),"deleteFeedItem",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.a,n=r.getCachedItems(r.file.id);if(n){var o=n.items.filter((function(t){return t.id!==e}));r.setCachedItems(r.file.id,o),r.isDestroyed()||t(e)}})),jr(Pr(r),"feedErrorCallback",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;e&&(r.hasError=!0),!r.isDestroyed()&&r.errorCallback&&r.errorCallback(t,n,jr({error:t},j.ed,e)),console.error(t)})),jr(Pr(r),"addPendingItem",(function(e,t,n){if(!t)throw Object(_.c)();var o=(new Date).toISOString(),i=Or({created_at:o,created_by:t,modified_at:o,isPending:!0},n),a=r.getCachedItems(r.file.id),s=a?a.items:[],c=[].concat(br(s),[i]);return r.setCachedItems(e,c),i})),jr(Pr(r),"createCommentSuccessCallback",(function(e,t,n){var o=e.message,i=void 0===o?"":o,a=e.tagged_message,s=void 0===a?"":a;e.tagged_message=s||i,r.updateFeedItem(Or({},e,{isPending:!1}),t),r.isDestroyed()||n(e)})),jr(Pr(r),"createCommentErrorCallback",(function(e,t,n){var o=e.status===j.Vc?ir.a.commentCreateConflictMessage:ir.a.commentCreateErrorMessage;r.updateFeedItem(r.createFeedError(o),n),r.feedErrorCallback(!1,e,t)})),jr(Pr(r),"updateFeedItem",(function(e,t){if(!r.file.id)throw Object(_.a)();var n=r.getCachedItems(r.file.id);if(n){var o=n.items.map((function(r){return r.id===t?Or({},r,{},e):r}));return r.setCachedItems(r.file.id,o),o}return null})),jr(Pr(r),"createComment",(function(e,t,n,o,i,a){var s=St()("comment_"),c={id:s,tagged_message:n,type:"comment"};if(!e.id)throw Object(_.a)();r.file=e,r.errorCallback=a,r.addPendingItem(r.file.id,t,c);var u={};o?u.taggedMessage=n:u.message=n,r.commentsAPI=new Ce(r.options),r.commentsAPI.createComment(Or({file:e},u,{successCallback:function(e){r.createCommentSuccessCallback(e,s,i)},errorCallback:function(e,t){r.createCommentErrorCallback(e,t,s)}}))})),jr(Pr(r),"updateComment",(function(e,t,n,o,i,a,s){var c={tagged_message:n};if(!e.id)throw Object(_.a)();r.file=e,r.errorCallback=s,r.updateFeedItem(Or({},c,{isPending:!0}),t);var u={};o?u.tagged_message=n:u.message=n,r.commentsAPI=new Ce(r.options),r.commentsAPI.updateComment(Or({file:e,commentId:t,permissions:i},u,{successCallback:function(e){r.updateFeedItem(Or({},u,{isPending:!1}),t),r.isDestroyed()||a(e)},errorCallback:function(e,t){r.feedErrorCallback(!0,e,t)}}))})),jr(Pr(r),"deleteAppActivity",(function(e,t,n,o){var i=e.id;if(!i)throw Object(_.a)();r.appActivityAPI=new hr(r.options),r.file=e,r.errorCallback=o,r.updateFeedItem({isPending:!0},t),r.appActivityAPI.deleteAppActivity({id:i,appActivityId:t,successCallback:r.deleteFeedItem.bind(Pr(r),t,n),errorCallback:function(e,n){r.deleteAppActivityErrorCallback(e,n,t)}})})),jr(Pr(r),"deleteAppActivityErrorCallback",(function(e,t,n){r.updateFeedItem(r.createFeedError(ir.a.appActivityDeleteErrorMessage),n),r.feedErrorCallback(!0,e,t)})),r.taskCollaboratorsAPI=[],r.taskLinksAPI=[],r}var r,n,o,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sr(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(j.ve).concat(e)}},{key:"getCachedItems",value:function(e){var t=this.getCache(),r=this.getCacheKey(e);return t.get(r)}},{key:"setCachedItems",value:function(e,t){var r=this.getCache(),n=this.getCacheKey(e);r.set(n,{hasError:!!this.hasError,items:t})}},{key:"feedItems",value:function(e){function t(t,r,n,o,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r,n,o){var i=this,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},s=a.shouldShowAppActivity,c=void 0!==s&&s,u=e.id,l=e.permissions,f=void 0===l?{}:l,p=this.getCachedItems(u);if(p){var h=p.hasError,d=p.items;if(h?n(d):r(d),!t)return}this.file=e,this.hasError=!1,this.errorCallback=o;var y=this.fetchVersions(),b=this.fetchCurrentVersion(),m=this.fetchComments(f),v=this.fetchTasksNew(),g=c?this.fetchAppActivity(f):Promise.resolve();Promise.all([y,b,m,v,g]).then((function(e){var t=yr(e),o=t[0],a=t[1],s=t.slice(2),c=i.versionsAPI.addCurrentVersion(a,o,i.file),l=ar.apply(void 0,[c].concat(br(s)));i.isDestroyed()||(i.setCachedItems(u,l),i.hasError?n(l):r(l))}))}))},{key:"fetchComments",value:function(e){var t=this;return this.commentsAPI=new Ce(this.options),new Promise((function(r){t.commentsAPI.getComments(t.file.id,e,r,t.fetchFeedItemErrorCallback.bind(t,r))}))}},{key:"fetchVersions",value:function(){var e=this;return this.versionsAPI=new ye(this.options),new Promise((function(t){e.versionsAPI.getVersions(e.file.id,t,e.fetchFeedItemErrorCallback.bind(e,t))}))}},{key:"fetchCurrentVersion",value:function(){var e=this;return this.versionsAPI=new ye(this.options),new Promise((function(t){var r=e.file.file_version,n=void 0===r?{}:r;e.versionsAPI.getVersion(e.file.id,n.id,t,e.fetchFeedItemErrorCallback.bind(e,t))}))}},{key:"fetchTasksNew",value:function(){var e=this;return this.tasksNewAPI=new qe(this.options),new Promise((function(t){e.tasksNewAPI.getTasksForFile({file:{id:e.file.id},successCallback:t,errorCallback:function(r,n){return e.fetchFeedItemErrorCallback(t,r,n)}})}))}},{key:"fetchFeedItemErrorCallback",value:function(e,t,r){var n=t.status,o=Object(_.d)(n);this.feedErrorCallback(o,t,r),e()}},{key:"createTaskNewSuccessCallback",value:(i=gr(regeneratorRuntime.mark((function e(t,r,n,o,i,a){var s,c,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Object(_.a)();case 2:return this.errorCallback=a,e.prev=3,e.next=6,this.createTaskLink(t,n);case 6:return s=e.sent,e.t0=nr.a,e.next=10,Promise.all(o.map((function(e){return e.item&&"group"===e.item.type?u.createTaskCollaboratorsforGroup(t,n,e):u.createTaskCollaborator(t,n,e)})));case 10:e.t1=e.sent,c=(0,e.t0)(e.t1),this.updateFeedItem(Or({},n,{task_links:{entries:[s],next_marker:null,limit:1},assigned_to:{entries:c,next_marker:null,limit:c.length},isPending:!1}),r),i(n),e.next=19;break;case 16:e.prev=16,e.t2=e.catch(3),this.feedErrorCallback(!1,e.t2,j.M);case 19:case"end":return e.stop()}}),e,this,[[3,16]])}))),function(e,t,r,n,o,a){return i.apply(this,arguments)})},{key:"createTaskCollaboratorsforGroup",value:function(e,t,r){var n=this;if(!e.id)throw Object(_.a)();return this.file=e,new Promise((function(o,i){var a=new $e(n.options);n.taskCollaboratorsAPI.push(a),a.createTaskCollaboratorsforGroup({file:e,task:t,group:r,successCallback:o,errorCallback:function(e){i(e)}})}))}},{key:"createTaskCollaborator",value:function(e,t,r){var n=this;if(!e.id)throw Object(_.a)();return this.file=e,new Promise((function(o,i){var a=new $e(n.options);n.taskCollaboratorsAPI.push(a),a.createTaskCollaborator({file:e,task:t,user:r,successCallback:o,errorCallback:function(e){i(e)}})}))}},{key:"deleteTaskCollaborator",value:function(e,t,r){var n=this;if(!e.id)throw Object(_.a)();return this.file.id=e.id,new Promise((function(o,i){var a=new $e(n.options);n.taskCollaboratorsAPI.push(a),a.deleteTaskCollaborator({file:e,task:t,taskCollaborator:{id:r.id},successCallback:o,errorCallback:function(e){i(e)}})}))}},{key:"createTaskLink",value:function(e,t){var r=this;if(!e.id)throw Object(_.a)();return this.file=e,new Promise((function(n,o){var i=new ct(r.options);r.taskLinksAPI.push(i),i.createTaskLink({file:e,task:t,successCallback:n,errorCallback:o})}))}},{key:"createFeedError",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:or.a.errorOccured;return{error:{message:e,title:t}}}},{key:"destroyTaskCollaborators",value:function(){Array.isArray(this.taskCollaboratorsAPI)&&(this.taskCollaboratorsAPI.forEach((function(e){return e.destroy()})),this.taskCollaboratorsAPI=[])}},{key:"destroyTaskLinks",value:function(){Array.isArray(this.taskLinksAPI)&&(this.taskLinksAPI.forEach((function(e){return e.destroy()})),this.taskLinksAPI=[])}},{key:"fetchAppActivity",value:function(e){var t=this;return this.appActivityAPI=new hr(this.options),new Promise((function(r){t.appActivityAPI.getAppActivity(t.file.id,e,r,t.fetchFeedItemErrorCallback.bind(t,r))}))}},{key:"destroy",value:function(){Cr(_r(t.prototype),"destroy",this).call(this),this.commentsAPI&&(this.commentsAPI.destroy(),delete this.commentsAPI),this.versionsAPI&&(this.versionsAPI.destroy(),delete this.versionsAPI),this.appActivityAPI&&(this.appActivityAPI.destroy(),delete this.appActivityAPI),this.tasksNewAPI&&(this.tasksNewAPI.destroy(),delete this.tasksNewAPI),this.destroyTaskCollaborators(),this.destroyTaskLinks()}}])&&wr(r.prototype,n),o&&wr(r,o),t}(S.a);function xr(e){return(xr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tr(e,t){return!t||"object"!==xr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dr(e){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Tr(this,Dr(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ur(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing app integration id!");return"".concat(this.getBaseApiUrl(),"/app_integrations/").concat(e)}},{key:"execute",value:function(e,t,r,n){if(!e)throw new Error("Missing integration id!");if(!t)throw new Error("Missing file id!");this.errorCode=j.W;var o="".concat(this.getUrl(e),"/execute"),i={data:{item:{id:t,type:j.ye}}};this.post({id:t,url:o,data:i,successCallback:r,errorCallback:n})}}])&&Rr(r.prototype,n),o&&Rr(r,o),t}(S.a);function Nr(e){return(Nr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hr(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Lr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fr(e,t){return!t||"object"!==Nr(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Br(e){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Fr(this,Br(t).apply(this,arguments))}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(t,e),r=t,(n=[{key:"getUrl",value:function(e){if(!e)throw new Error("Missing file id!");return"".concat(this.getBaseApiUrl(),"/files/").concat(e,"/open_with_integrations")}},{key:"getOpenWithIntegrations",value:function(e,t,r){var n=this;this.errorCode=j.db,this.get({id:e,successCallback:function(e){var r=n.formatOpenWithData(e),o=n.consolidateBoxEditIntegrations(r);t(o)},errorCallback:r})}},{key:"consolidateBoxEditIntegrations",value:function(e){var t=Hr(e);return e.some((function(e){return e.appIntegrationId===j.c}))&&(t=e.filter((function(e){return e.appIntegrationId!==j.d}))),t}},{key:"formatOpenWithData",value:function(e){var t=e.items,r=e.default_app_integration;return t.map((function(e){var t=e.app_integration,n=e.disabled_reasons,o=e.display_name,i=e.display_description,a=e.display_order,s=e.is_disabled,c=e.should_show_consent_popup,u=t.id,l=t.type;return{appIntegrationId:u,displayDescription:i,disabledReasons:n||[],displayOrder:a,isDefault:!!r&&u===r.id,isDisabled:s,displayName:o,requiresConsent:c,type:l}})).sort((function(e,t){return e.displayOrder-t.displayOrder}))}}])&&Lr(r.prototype,n),o&&Lr(r,o),t}(S.a);function zr(e){return(zr="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gr(e){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jr(e,t){return(Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vr=function(e){function t(){var e,r,n,o,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];return r=function(e,t){return!t||"object"!==zr(t)&&"function"!==typeof t?Kr(e):t}(this,(e=Gr(t)).call.apply(e,[this].concat(s))),n=Kr(r),i=function(e){var t=e.data;r.getCache().set(r.key,t),r.finish()},(o="queryMetadataSuccessHandler")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i,r}var r,n,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jr(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(j.h).concat(e)}},{key:"getUrl",value:function(){return"".concat(this.getBaseApiUrl(),"/metadata_queries/execute_read")}},{key:"isLoaded",value:function(){return this.getCache().has(this.key)}},{key:"finish",value:function(){if(!this.isDestroyed()){var e=this.getCache().get(this.key);this.successCallback(e)}}},{key:"queryMetadataRequest",value:function(e){this.isDestroyed()||(this.errorCode=j.qb,this.xhr.post({url:this.getUrl(),data:e}).then(this.queryMetadataSuccessHandler).catch(this.errorHandler))}},{key:"queryMetadata",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!this.isDestroyed()){var o=n.context,i=void 0===o?{}:o;this.key=this.getCacheKey(i.id),this.successCallback=t,this.errorCallback=r,n.forceFetch&&this.getCache().unset(this.key),this.isLoaded()?this.finish():this.queryMetadataRequest(e)}}}])&&Xr(r.prototype,n),o&&Xr(r,o),t}(S.a);function Qr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Yr={CHROME:"Chrome",EDGE:"Edge",FIREFOX:"Firefox",MAC:"Mac",SAFARI:"Safari",IE:"Explorer"},Zr=[{key:"userAgent",subString:Yr.EDGE,identity:Yr.EDGE},{key:"userAgent",subString:Yr.CHROME,identity:Yr.CHROME},{key:"userAgent",subString:"criOS",identity:Yr.CHROME,versionSearch:"criOS"},{key:"vendor",subString:"Apple",identity:Yr.SAFARI,versionSearch:"Version"},{key:"userAgent",subString:Yr.FIREFOX,identity:Yr.FIREFOX},{key:"userAgent",subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{key:"userAgent",subString:"Trident",identity:"Explorer",versionSearch:"rv"},{key:"userAgent",subString:"Gecko",identity:"Mozilla",versionSearch:"rv"}],$r=[{key:"platform",subString:"Win",identity:"Windows"},{key:"userAgent",subString:"iPod",identity:"iOS",device:"iPod"},{key:"userAgent",subString:"iPhone",identity:"iOS",device:"iPhone"},{key:"userAgent",subString:"iPad",identity:"iOS",device:"iPad"},{key:"platform",subString:Yr.MAC,identity:Yr.MAC},{key:"userAgent",subString:"Android",identity:"Android"},{key:"platform",subString:"Linux",identity:"Linux"}];function en(e,t){for(var r,n=null,o=null,i="",a=0,s=t.length;a<s;a+=1)if(r=e[t[a].key],i=t[a].versionSearch||t[a].identity,r&&-1!==r.indexOf(t[a].subString)){n=t[a].identity,o=t[a].device;break}return{identity:n,device:o,versionSearchString:i}}function tn(e,t){var r=e.indexOf(t);if(-1===r)return"";var n=e.substring(r+t.length+1).match(/[0-9]+(?:\.[0-9]*)?/);return n&&n.length?n[0]:""}var rn=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var t=window.navigator,r=en(t,Zr),n=en(t,$r);this.browser=r.identity||"unknown",this.version=tn(t.userAgent,r.versionSearchString)||tn(t.appVersion,r.versionSearchString)||"unknown",this.OS=n.identity||"unknown",this.device=n.device||"unknown"}var t,r,n;return t=e,(r=[{key:"getName",value:function(){return this.browser}},{key:"getVersion",value:function(){return this.version}},{key:"isMinBrowser",value:function(e,t){return this.browser.toLowerCase()===e.toLowerCase()&&parseFloat(this.version)>=parseFloat(t)}},{key:"isSafari",value:function(){return this.browser===Yr.SAFARI}},{key:"isFirefox",value:function(){return this.browser===Yr.FIREFOX}},{key:"isChrome",value:function(){return this.browser===Yr.CHROME}},{key:"isIE",value:function(){return this.browser===Yr.IE}},{key:"isEdge",value:function(){return this.browser===Yr.EDGE}},{key:"isIEAndSpecificBrowserPluginSupported",value:function(e){return this.isIE()&&function(e){var t=e||"htmlfile",r=!1;try{"ActiveXObject"in window&&(r=!!new(0,window.ActiveXObject)(t))}catch(e){r=!1}return r}(e)}}])&&Qr(t.prototype,r),n&&Qr(t,n),e}());var nn=function(e){var t,r=[],n=0;return new Promise((function(o,i){e.forEach((function(a,s){a.then(o).catch(function(o){return function(a){r[o]=a,(n+=1)===e.length&&(t=new Error("no promises resolved"),i(t))}}(s))}))}))},on={SAFARI_CHANNEL_NAME:"safari_channel",SECRET_STORE_COOKIE_NAME:"box-edit-secret-cookie-name",BOX_EDIT_APP_NAME:"BoxEdit",BOX_EDIT_NOT_SUPPORTED_ERROR:"box_edit_not_supported_error",BOX_EDIT_UNINSTALLED_ERROR:"box_edit_uninstalled_error",BOX_EDIT_UPGRADE_BROWSER_ERROR:"box_edit_upgrade_browser_error",BOX_EDIT_SAFARI_ERROR:"box_edit_safari_error",BOX_EDIT_INSECURE_REQUESTS_UPGRADED_ERROR:"box_edit_insecure_requests_upgraded_error",BOX_TOOLS_PLUGIN_NAME:"Box.BoxTools",BOX_SECURE_LOCAL_BASE_URL:"https://edit.boxlocalhost.com:",BOX_UNSECURE_LOCAL_BASE_URL:"http://127.0.0.1:",ACTIVEX_CHANNEL_NAME:"activex_channel",HTTP_CHANNEL_NAME:"http_channel",HTTPS_CHANNEL_NAME:"https_channel",OPERATION_STATUS:"status",OPERATION_REQUEST:"application_request",OPERATION_COMMAND:"application_command",UNCREATED_STATUS:"uncreated",CREATED_STATUS:"created",ACTIVE_STATUS:"active",HIVE_TABLE_WEBAPP_BOXTOOLS_ANALYTICS:"webapp_boxtools_analytics",KEY_LENGTH:16,KEY_ID_LENGTH:8,IV:"75392C57F66CE7E7EF47110410280DD7",OUTPUT_EVENT:"box_extension_output",REQUEST_ID_PRE:"BOX-EXT-REQ-ID-",REQUEST_TIMEOUT_RESPONSE_CODE:408,EXTENSION_BLACKLIST:{A6P:1,AC:1,AS:1,ACR:1,ACTION:1,AIR:1,APP:1,AWK:1,BAT:1,BOXNOTE:1,CGI:1,CHM:1,CMD:1,COM:1,CSH:1,DEK:1,DLD:1,DS:1,EBM:1,ESH:1,EXE:1,EZS:1,FKY:1,FRS:1,FXP:1,GADGET:1,HMS:1,HTA:1,ICD:1,INX:1,IPF:1,ISU:1,JAR:1,JS:1,JSE:1,JSX:1,KIX:1,LNK:1,LUA:1,MCR:1,MEM:1,MPX:1,MS:1,MSI:1,MST:1,OBS:1,PAF:1,PEX:1,PIF:1,PL:1,PRC:1,PRG:1,PVD:1,PWC:1,PY:1,PYC:1,PYO:1,QPX:1,RBX:1,REG:1,RGS:1,ROX:1,RPJ:1,SCAR:1,SCR:1,SCRIPT:1,SCPT:1,SCT:1,SH:1,SHB:1,SHS:1,SPR:1,TLB:1,TMS:1,U3P:1,UDF:1,URL:1,VB:1,VBE:1,VBS:1,VBSCRIPT:1,WCM:1,WPK:1,WS:1,WSF:1,XQT:1}};function an(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cn=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),sn(this,"buildNextRequestID",(function(){return"".concat(on.REQUEST_ID_PRE).concat(r.window.performance.now())})),sn(this,"buildDetailsObj",(function(e,t,n){var o=n.toString(),i={data:void 0,operation:e,properties:{application:r.appName,timeout:o},req_id:r.buildNextRequestID()};if(e!==on.OPERATION_STATUS){if(!t)throw new TypeError("Data cannot be undefined for ".concat(e));i.data=t}return i})),this.appName=t,this.window=window}var t,r,n;return t=e,(r=[{key:"sendCommand",value:function(e,t,r){return Promise.resolve("TODO")}},{key:"sendRequest",value:function(e,t,r){return Promise.resolve("TODO")}},{key:"getComServerStatus",value:function(e,t){return Promise.resolve("TODO")}},{key:"destroy",value:function(){}}])&&an(t.prototype,r),n&&an(t,n),e}();function un(e){return(un="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dn=2,yn=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==un(t)&&"function"!==typeof t?fn(e):t}(this,ln(t).call(this,e)),hn(fn(n),"executeOperation",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Promise((function(i,a){var s=n.buildDetailsObj(e,t,o),c=setTimeout((function(){a(new Error({status_code:on.REQUEST_TIMEOUT_RESPONSE_CODE}))}),r);n.reqIdToPromiseMap.set(s.req_id,{resolve:i,rejectTimeout:c}),n.executeActiveXEvent({detail:s})}))})),hn(fn(n),"repairActiveXConnection",(function(e){rn.isIEAndSpecificBrowserPluginSupported(on.BOX_TOOLS_PLUGIN_NAME)&&(n.retryAttempt>=dn||(n.retryAttempt+=1,setTimeout((function(){n.executeActiveXEvent(e)}),100)))})),hn(fn(n),"executeActiveXEvent",(function(e){var t=n.createActiveXObjectJSRef(),r="ExecuteSync"in t;try{n.isSynchronous&&r?t.ExecuteSync(JSON.stringify(e)):t.Execute(JSON.stringify(e))}catch(t){n.repairActiveXConnection(e)}})),hn(fn(n),"createActiveXObjectJSRef",(function(){return new(0,n.window.ActiveXObject)(on.BOX_TOOLS_PLUGIN_NAME)})),hn(fn(n),"setupActiveXCommunication",(function(){n.isActiveXExtensionListenerAttached||(n.document.addEventListener(on.OUTPUT_EVENT,n.appExtensionEventResponseHandler),n.isActiveXExtensionListenerAttached=!0)})),hn(fn(n),"tearDownActiveXCommunication",(function(){n.isActiveXExtensionListenerAttached&&(n.document.removeEventListener(on.OUTPUT_EVENT,n.appExtensionEventResponseHandler),n.isActiveXExtensionListenerAttached=!1)})),hn(fn(n),"appExtensionEventResponseHandler",(function(e){n.retryAttempt>0&&(n.retryAttempt=0);var t="string"===typeof e.detail?JSON.parse(e.detail):e.detail;if(n.reqIdToPromiseMap.has(t.req_id)){var r=n.reqIdToPromiseMap.get(t.req_id);if(r){clearTimeout(r.rejectTimeout),n.reqIdToPromiseMap.delete(t.req_id);var o="string"===typeof t.com_server_response.data?JSON.parse(t.com_server_response.data):t.com_server_response.data;r.resolve(o)}}})),hn(fn(n),"getComServerStatus",(function(e,t){return n.executeOperation(on.OPERATION_STATUS,null,e,t)})),hn(fn(n),"sendRequest",(function(e,t,r){return n.executeOperation(on.OPERATION_REQUEST,e,t,r)})),hn(fn(n),"sendCommand",(function(e,t,r){return n.executeOperation(on.OPERATION_COMMAND,e,t,r)})),hn(fn(n),"destroy",(function(){n.tearDownActiveXCommunication()})),n.isSynchronous=r,n.channelName=on.ACTIVEX_CHANNEL_NAME,n.reqIdToPromiseMap=new Map,n.isActiveXExtensionListenerAttached=!1,n.retryAttempt=0,n.document=document,n.window=window,n.setupActiveXCommunication(),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,e),t}(cn),bn=r("03vecjQMf5");function mn(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",i=window.document,a=new Date,s=[];"undefined"===typeof r&&(r=a.getTime()+5184e6),a.setTime(r),s.push("".concat(e,"=").concat(encodeURIComponent(t))),0!==r&&s.push("; expires=".concat(a.toUTCString())),s.push("; path=".concat(n)),o&&s.push("; domain=".concat(o)),s.push("; secure"),i.cookie=s.join("")}function vn(e){return(vn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gn(e){return(gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pn="GET",Cn="POST",_n=31536e6,Sn=17223,jn=17224,En="Content-Type",An="text/plain; charset=UTF-8",In="notrunning",xn=new bn.a;function Rn(){return xn.getItem("comUseFallback")?{primary:jn,fallback:Sn}:{primary:Sn,fallback:jn}}var Tn=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(e,t){return!t||"object"!==vn(t)&&"function"!==typeof t?kn(e):t}(this,gn(t).call(this,e)),wn(kn(o),"createCORSRequest",(function(e,t){var r;try{return(r=new(0,o.window.XMLHttpRequest)).open(e,t,!0),r}catch(r){if(o.retryCounter<3)return o.retryCounter+=1,o.createCORSRequest(e,t);throw new Error("could not create xhr")}})),wn(kn(o),"getComServerStatusInstallationPromise",(function(e){var t,r,n=new Promise((function(e,n){t=e,r=n})),i=function(e,r){o.currentPort=e,e===Sn?xn.removeItem("comUseFallback"):xn.setItem("comUseFallback",1),o.comServerInstallationPromiseRejected=!1,t(r)},a=Rn(),s=a.primary,c=a.fallback;return o.checkInstallStatus(s,e).then(i.bind(kn(o),s)).catch((function(t){if(t===In)return o.comServerInstallationPromiseRejected=!0,void r();o.checkInstallStatus(c,e).then(i.bind(kn(o),c)).catch((function(){o.comServerInstallationPromiseRejected=!0,r()}))})),n})),wn(kn(o),"sendComServerRequest",(function(e,t,r,n){return new Promise((function(i,a){try{var s=o.createCORSRequest(e,t);s.setRequestHeader(En,An),s.onload=function(){i(s)},s.onerror=function(){a(s)},n>0&&(s.timeout=n,s.ontimeout=function(){a(s)}),setTimeout((function(){s.send(r)}),0)}catch(e){a()}}))})),wn(kn(o),"checkInstallStatus",(function(e,t){return o.sendComServerRequest(Pn,"".concat(o.url).concat(e,"/status"),null,t).then((function(e){var t=JSON.parse(e.responseText);if(t.running)return t;throw o.comServerInstallationPromiseRejected=!0,new Error(In)}))})),wn(kn(o),"getComChannel",(function(e){return function(e){var t,r,n=window.document.cookie.split("; "),o=n.length;for(r=0;r<o;r+=1)if((t=n[r].split("="))[0]===e)return t[1]?decodeURIComponent(t[1]):"";return""}("".concat(e,"-bgp-id"))})),wn(kn(o),"setComChannel",(function(e){var t=o.getComChannel(e)||o.generateId(),r="bgp-".concat(t),n=(new Date).getTime()+_n;return mn("".concat(e,"-bgp-id"),t,n),mn("bgp-".concat(t),"generic",n),r})),wn(kn(o),"getComServerStatus",(function(e){return!o.comServerInstallationPromise||o.comServerInstallationPromiseRejected?(o.comServerInstallationPromise=null,o.comServerInstallationPromise=o.getComServerStatusInstallationPromise(e),o.comServerInstallationPromise):o.comServerInstallationPromise})),wn(kn(o),"sendRequest",(function(e,t,r){var n="".concat(o.url).concat(o.currentPort,"/application_request?application=").concat(o.appName,"&com=").concat(o.comChannelName,"&timeout=").concat(r);return o.sendComServerRequest(Cn,n,e,t).then((function(e){var t=JSON.parse(e.responseText);if(t.response_type&&"error"===t.response_type)throw new Error("Communication error: ".concat(t.message));return t}))})),wn(kn(o),"sendCommand",(function(e,t,r){var n="".concat(o.url).concat(o.currentPort,"/application_command?application=").concat(o.appName,"&com=").concat(o.comChannelName,"&timeout=").concat(r);return o.sendComServerRequest(Cn,n,e,t).then((function(e){return JSON.parse(e.responseText)}))})),wn(kn(o),"generateId",(function(){var e=(new Date).getTime();return"xxxxxxxx".replace(/x/g,(function(){return Math.floor((e+16*Math.random())%16).toString(16)}))})),o.url=r,o.comChannelName=o.setComChannel(e),o.channelName=n,o.comServerInstallationPromise=null,o.comServerInstallationPromiseRejected=!1,o.retryCounter=0,o.sendCount=0,o.currentPort=Rn().primary,o.window=window,o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(t,e),t}(cn);function Dn(e){return(Dn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Hn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ln="box_extension_input",Fn="box_extension_output",Bn=function(e){function t(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=function(e,t){return!t||"object"!==Dn(t)&&"function"!==typeof t?Mn(e):t}(this,Un(t).call(this,e)),Hn(Mn(r),"executeOperation",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new Promise((function(i,a){var s=r.buildDetailsObj(e,t,o),c=setTimeout((function(){a(new Error({status_code:on.REQUEST_TIMEOUT_RESPONSE_CODE}))}),n);r.reqIdToPromiseMap.set(s.req_id,{resolve:i,rejectTimeout:c}),r.createAndDispatchAppExtensionEvent({detail:s})}))})),Hn(Mn(r),"setupSafariExtensionCommunication",(function(){r.isAppExtensionListenerAttached||(r.isAppExtensionListenerAttached=!0,r.document.addEventListener(Fn,r.appExtensionEventResponseHandler))})),Hn(Mn(r),"tearDownSafariExtensionCommunication",(function(){r.isAppExtensionListenerAttached&&(r.isAppExtensionListenerAttached=!1,r.document.removeEventListener(Fn,r.appExtensionEventResponseHandler))})),Hn(Mn(r),"appExtensionEventResponseHandler",(function(e){var t="string"===typeof e.detail?JSON.parse(e.detail):e.detail;if(r.reqIdToPromiseMap.has(t.req_id)){var n=r.reqIdToPromiseMap.get(t.req_id);if(n){clearTimeout(n.rejectTimeout),r.reqIdToPromiseMap.delete(t.req_id);var o="string"===typeof t.com_server_response.data?JSON.parse(t.com_server_response.data):t.com_server_response.data;n.resolve(o)}}})),Hn(Mn(r),"createAndDispatchAppExtensionEvent",(function(e){var t=new(0,r.window.CustomEvent)(Ln,e);r.document.dispatchEvent(t)})),Hn(Mn(r),"getComServerStatus",(function(e,t){return r.executeOperation(on.OPERATION_STATUS,null,e,t)})),Hn(Mn(r),"sendRequest",(function(e,t,n){return r.executeOperation(on.OPERATION_REQUEST,e,t,n)})),Hn(Mn(r),"sendCommand",(function(e,t,n){return r.executeOperation(on.OPERATION_COMMAND,e,t,n)})),Hn(Mn(r),"destroy",(function(){r.tearDownSafariExtensionCommunication()})),r.reqIdToPromiseMap=new Map,r.channelName=on.SAFARI_CHANNEL_NAME,r.window=window,r.document=document,r.setupSafariExtensionCommunication(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(t,e),t}(cn);function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Wn,zn=55,Xn="16.16299",Gn="17.17134",Kn=5e3;function Jn(e){var t=on.BOX_UNSECURE_LOCAL_BASE_URL,r=on.CREATED_STATUS,n=on.HTTP_CHANNEL_NAME;return Wn.http_channel_status=r,new Tn(e,t,n)}function Vn(e){var t=on.CREATED_STATUS;return Wn.safari_channel_status=t,new Bn(e)}function Qn(e){var t=on.CREATED_STATUS;return Wn.activex_channel_status=t,new yn(e,!0)}function Yn(){var e=Yr.EDGE;return rn.isMinBrowser(e,Gn)||rn.isMinBrowser(e,Xn)&&rn.getVersion().startsWith("16.")}function Zn(){return rn.isEdge()&&!Yn()}function $n(){var e=Yr.CHROME,t=Yr.FIREFOX;return rn.isMinBrowser(e,53)||rn.isMinBrowser(t,zn)||Yn()}function eo(){return rn.isMinBrowser(Yr.SAFARI,10)}function to(){return rn.isMinBrowser(Yr.IE,11)}function ro(e){var t=on.BOX_EDIT_NOT_SUPPORTED_ERROR,r=on.BOX_EDIT_SAFARI_ERROR,n=on.BOX_EDIT_UNINSTALLED_ERROR,o=on.BOX_EDIT_UPGRADE_BROWSER_ERROR,i=t;return $n()?i=n:to()?i=n:rn.isFirefox()||rn.isChrome()||rn.isSafari()&&!eo()||Zn()?i=o:eo()&&(i=r),Wn.error_message=i,e(new Error(i))}function no(e){var t=Kn;return"number"===typeof e&&e>=0&&(t=Math.floor(e)),t}function oo(e){var t=+(e/1e3).toFixed(2);return e<2?t/=2:t-=1,t}var io=function(){function e(t){var r,n,o,i,a,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=!1,(n="isInitialized")in(r=this)?Object.defineProperty(r,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[n]=o,this.channels=[],this.isInitialized=!0,i=rn.getName(),a=rn.getVersion(),s=on.UNCREATED_STATUS,Wn={box_tools_version:null,browser_name:i,browser_version:a,error_message:null,installation_type:null,http_channel_status:s,https_channel_status:s,activex_channel_status:s,safari_channel_status:s},$n()?this.channels.push(Jn(t)):eo()?this.channels.push(Vn(t)):to()&&rn.isIEAndSpecificBrowserPluginSupported(on.BOX_TOOLS_PLUGIN_NAME)?this.channels.push(function(e){var t=on.CREATED_STATUS;return Wn.activex_channel_status=t,new yn(e,!1)}(t)):rn.isFirefox()&&!rn.isMinBrowser(Yr.FIREFOX,zn)||Zn()||(this.channels=this.channels.concat([Jn(t),Vn(t),Qn(t)]))}var t,r,n;return t=e,(r=[{key:"getComServerStatus",value:function(e){var t=this,r=on.ACTIVE_STATUS,n=no(e),o=oo(n),i=Zn();return new Promise((function(e,a){return i?ro.call(null,a):t.channels.length?nn(t.channels.map((function(i){return i.getComServerStatus(n,o).then((function(n){return t.activeChannel=i,n&&(Wn.installation_type=n.installation_type,Wn.box_tools_version=n.version),Wn["".concat(i.channelName,"_status")]=r,e(n)}))}))).catch(ro.bind(null,a)):ro.call(null,a)}))}},{key:"sendRequest",value:function(e,t,r){var n=this,o=no(r),i=oo(o);return this.activeChannel?this.activeChannel.sendRequest(e,o,i):this.getComServerStatus().then((function(){return n.activeChannel.sendRequest(e,o,i)}))}},{key:"sendCommand",value:function(e,t){var r=this,n=no(t),o=oo(n);return this.activeChannel?this.activeChannel.sendCommand(e,n,o):this.getComServerStatus().then((function(){return r.activeChannel.sendCommand(e,n,o)}))}}])&&qn(t.prototype,r),n&&qn(t,n),e}();function ao(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function so(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function co(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){so(i,n,o,a,s,"next",e)}function s(e){so(i,n,o,a,s,"throw",e)}a(void 0)}))}}function uo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var lo;var fo=null,po=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fo instanceof e||(fo=this),this.extensionRequestQueue=new Map,fo}var t,r,n,o;return t=e,(r=[{key:"queueGetNativeAppNameFromLocal",value:function(e){if(this.extensionRequestQueue.has(e)){var t=this.extensionRequestQueue.get(e);if(!t)throw new Error("Race condition re: queueGetNativeAppNameFromLocal");return t.promise}var r={},n=new Promise((function(e,t){r.resolve=e,r.reject=t}));return r.promise=n,this.extensionRequestQueue.set(e,r),n}},{key:"checkBoxEditAvailability",value:function(){return this.getBoxEditAvailability()}},{key:"getBoxEditAvailability",value:function(){return this.client=new io(on.BOX_EDIT_APP_NAME),this.client.getComServerStatus()}},{key:"canOpenWithBoxEdit",value:(o=co(regeneratorRuntime.mark((function e(t){var r,n,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=co(regeneratorRuntime.mark((function e(t){var r,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.getAppForExtension(t);case 3:return r=e.sent,n=[t,r],e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),i=[t,""],e.abrupt("return",i);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));case 2:return r=e.sent,n=new Map,r.forEach((function(e){return n.set.apply(n,ao(e))})),e.abrupt("return",Promise.resolve(n));case 6:case"end":return e.stop()}}),e)}))),function(e){return o.apply(this,arguments)})},{key:"openFile",value:function(e,t){var r=function(e,t,r,n){return JSON.stringify({auth_code:r,auth_token:t,browser_type:rn.getName(),command_type:"launch_application",file_id:e.toString(),token_scope:n})}(e,t.data.token,t.data.auth_code,t.data.token_scope);return this.client.sendCommand(r,5e3)}},{key:"getAppForExtension",value:function(e){var t=this;try{if(function(e){var t=on.EXTENSION_BLACKLIST,r=e.toUpperCase();return"."===r.charAt(0)&&(r=r.substr(1)),r in t}(e))throw new Error("blacklisted");var r=this.queueGetNativeAppNameFromLocal(e);return lo||(lo=setTimeout((function(){t.processExtensionRequestQueue()}),100)),r}catch(e){return Promise.reject()}}},{key:"processExtensionRequestQueue",value:function(){var e=new Map,t=[];this.extensionRequestQueue.forEach((function(r,n){e.set(n,r),t.push(n)})),this.extensionRequestQueue.clear(),lo=null;var r=function(e){return JSON.stringify({request_type:"get_default_application",extension:e})}(t);return this.client.sendRequest(r).then((function(r){if(r&&r.default_application_name){var n=r.default_application_name;"[object Object]"===Object.prototype.toString.call(n)&&(n=[n]),n.forEach((function(t){var r=Object.keys(t)[0],n=decodeURIComponent(t[r]);if(n){var o=e.get(r);o&&(o.resolve(n),e.delete(r))}}))}t.forEach((function(t){var r=e.get(t);r&&r.reject()}))}))}}])&&uo(t.prototype,r),n&&uo(t,n),e}();function ho(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var mo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ho(Object(r),!0).forEach((function(t){yo(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ho(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{apiHost:t.apiHost||j.z,uploadHost:t.uploadHost||j.C,cache:t.cache||new n.a,language:t.language})}var t,r,i;return t=e,(r=[{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.fileAPI&&(this.fileAPI.destroy(),delete this.fileAPI),this.weblinkAPI&&(this.weblinkAPI.destroy(),delete this.weblinkAPI),this.plainUploadAPI&&(this.plainUploadAPI.destroy(),delete this.plainUploadAPI),this.chunkedUploadAPI&&(this.chunkedUploadAPI.destroy(),delete this.chunkedUploadAPI),this.folderAPI&&(this.folderAPI.destroy(),delete this.folderAPI),this.searchAPI&&(this.searchAPI.destroy(),delete this.searchAPI),this.recentsAPI&&(this.recentsAPI.destroy(),delete this.recentsAPI),this.versionsAPI&&(this.versionsAPI.destroy(),delete this.versionsAPI),this.fileAccessStatsAPI&&(this.fileAccessStatsAPI.destroy(),delete this.fileAccessStatsAPI),this.tasksNewAPI&&(this.tasksNewAPI.destroy(),delete this.tasksNewAPI),this.taskCollaboratorsAPI&&(this.taskCollaboratorsAPI.destroy(),delete this.taskCollaboratorsAPI),this.taskLinksAPI&&(this.taskLinksAPI.destroy(),delete this.taskLinksAPI),this.commentsAPI&&(this.commentsAPI.destroy(),delete this.commentsAPI),this.usersAPI&&(this.usersAPI.destroy(),delete this.usersAPI),this.metadataAPI&&(this.metadataAPI.destroy(),delete this.metadataAPI),this.fileCollaboratorsAPI&&(this.fileCollaboratorsAPI.destroy(),delete this.fileCollaboratorsAPI),this.appIntegrationsAPI&&(this.appIntegrationsAPI.destroy(),delete this.appIntegrationsAPI),this.metadataQueryAPI&&(this.metadataQueryAPI.destroy(),delete this.metadataQueryAPI),this.openWithAPI&&(this.openWithAPI.destroy(),delete this.openWithAPI),e&&(this.options.cache=new n.a)}},{key:"getCache",value:function(){return this.options.cache}},{key:"getAPI",value:function(e){var t;switch(e){case j.ze:t=this.getFolderAPI();break;case j.ye:t=this.getFileAPI();break;case j.Ae:t=this.getWebLinkAPI();break;default:throw new Error("Unknown Type!")}return t}},{key:"getFileAPI",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e&&this.destroy(),this.fileAPI=new O.a(this.options),this.fileAPI}},{key:"getWebLinkAPI",value:function(){return this.destroy(),this.weblinkAPI=new w.a(this.options),this.weblinkAPI}},{key:"getPlainUploadAPI",value:function(){return this.destroy(),this.plainUploadAPI=new g(this.options),this.plainUploadAPI}},{key:"getChunkedUploadAPI",value:function(){return this.destroy(),this.chunkedUploadAPI=new o.a(this.options),this.chunkedUploadAPI}},{key:"getFolderAPI",value:function(){return this.destroy(),this.folderAPI=new k.a(this.options),this.folderAPI}},{key:"getSearchAPI",value:function(){return this.destroy(),this.searchAPI=new M(this.options),this.searchAPI}},{key:"getRecentsAPI",value:function(){return this.destroy(),this.recentsAPI=new z(this.options),this.recentsAPI}},{key:"getMetadataAPI",value:function(e){return e&&this.destroy(),this.metadataAPI=new Mt(this.options),this.metadataAPI}},{key:"getVersionsAPI",value:function(e){return e&&this.destroy(),this.versionsAPI=new ye(this.options),this.versionsAPI}},{key:"getCommentsAPI",value:function(e){return e&&this.destroy(),this.commentsAPI=new Ce(this.options),this.commentsAPI}},{key:"getTasksNewAPI",value:function(e){return e&&this.destroy(),this.tasksNewAPI=new qe(this.options),this.tasksNewAPI}},{key:"getTaskCollaboratorsAPI",value:function(e){return e&&this.destroy(),this.taskCollaboratorsAPI=new $e(this.options),this.taskCollaboratorsAPI}},{key:"getTaskLinksAPI",value:function(e){return e&&this.destroy(),this.taskLinksAPI=new ct(this.options),this.taskLinksAPI}},{key:"getFileAccessStatsAPI",value:function(e){return e&&this.destroy(),this.fileAccessStatsAPI=new dt(this.options),this.fileAccessStatsAPI}},{key:"getFileCollaboratorsAPI",value:function(e){return e&&this.destroy(),this.fileCollaboratorsAPI=new tr(this.options),this.fileCollaboratorsAPI}},{key:"getUsersAPI",value:function(e){return e&&this.destroy(),this.usersAPI=new Ct(this.options),this.usersAPI}},{key:"getFeedAPI",value:function(e){return e&&this.destroy(),this.feedItemsAPI=new Ir(this.options),this.feedItemsAPI}},{key:"getOpenWithAPI",value:function(e){return e&&this.destroy(),this.openWithAPI=new Wr(this.options),this.openWithAPI}},{key:"getAppIntegrationsAPI",value:function(e){return e&&this.destroy(),this.appIntegrationsAPI=new Mr(this.options),this.appIntegrationsAPI}},{key:"getMetadataQueryAPI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.destroy(),this.metadataQueryAPI=new Vr(this.options),this.metadataQueryAPI}},{key:"getBoxEditAPI",value:function(){return this.boxEditAPI=new po,this.boxEditAPI}}])&&bo(t.prototype,r),i&&bo(t,i),e}();t.a=mo},BSXSWhc9DH:function(e,t,r){"use strict";var n=r("QkVNESsdth"),o=r.n(n);function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}var t,r,n;return t=e,(r=[{key:"set",value:function(e,t){this.cache[e]=t}},{key:"merge",value:function(e,t){if(!this.has(e))throw new Error("Key ".concat(e," not in cache!"));this.set(e,o()({},this.get(e),t))}},{key:"unset",value:function(e){delete this.cache[e]}},{key:"unsetAll",value:function(e){var t=this;Object.keys(this.cache).forEach((function(r){r.startsWith(e)&&delete t.cache[r]}))}},{key:"has",value:function(e){return{}.hasOwnProperty.call(this.cache,e)}},{key:"get",value:function(e){if(this.has(e))return this.cache[e]}}])&&i(t.prototype,r),n&&i(t,n),e}();t.a=a},BkRInKdPEO:function(e,t,r){var n=r("OBhPXHkRcd"),o=1,i=4;e.exports=function(e){return n(e,o|i)}},"CMvHH+d1uS":function(e,t,r){"use strict";function n(){return(n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.r(t);var o=r("q1tIBJhxTW"),i=r("tEsh7WUI7M"),a=r.n(i),s=r("bdgKLzagsY");r.d(t,"withContentRect",(function(){return f}));var c=["client","offset","scroll","bounds","margin"];function u(e){var t=[];return c.forEach((function(r){e[r]&&t.push(r)})),t}function l(e,t){var r={};if(t.indexOf("client")>-1&&(r.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(r.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(r.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var n=e.getBoundingClientRect();r.bounds={top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}if(t.indexOf("margin")>-1){var o=getComputedStyle(e);r.margin={top:o?parseInt(o.marginTop):0,right:o?parseInt(o.marginRight):0,bottom:o?parseInt(o.marginBottom):0,left:o?parseInt(o.marginLeft):0}}return r}function f(e){return function(t){var r,i;return i=r=function(r){var i,a;function c(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=r.call.apply(r,[this].concat(o))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t.measure=function(r){var n=l(t._node,e||u(t.props));r&&(n.entry=r[0].contentRect),t._animationFrameID=window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:n}),"function"===typeof t.props.onResize&&t.props.onResize(n))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node);var r=t.props.innerRef;r&&("function"===typeof r?r(t._node):r.current=t._node)},t}a=r,(i=c).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a;var f=c.prototype;return f.componentDidMount=function(){this._resizeObserver=new s.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"===typeof this.props.onResize&&this.props.onResize(l(this._node,e||u(this.props))))},f.componentWillUnmount=function(){null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null),window.cancelAnimationFrame(this._animationFrameID)},f.render=function(){var e=this.props,r=(e.innerRef,e.onResize,function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,["innerRef","onResize"]));return Object(o.createElement)(t,n({},r,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},c}(o.Component),r.propTypes={client:a.a.bool,offset:a.a.bool,scroll:a.a.bool,bounds:a.a.bool,margin:a.a.bool,innerRef:a.a.oneOfType([a.a.object,a.a.func]),onResize:a.a.func},i}}var p=f()((function(e){var t=e.measure,r=e.measureRef,n=e.contentRect;return(0,e.children)({measure:t,measureRef:r,contentRect:n})}));p.displayName="Measure",p.propTypes.children=a.a.func;t.default=p},D1y2Gn20OY:function(e,t,r){var n=r("FZooccv/8F");e.exports=function(e,t,r){return null==e?e:n(e,t,r)}},DUBYMsvOMy:function(e,t,r){"use strict";function n(){return window.crypto||window.msCrypto}function o(e,t){var r=n();return r!==window.msCrypto?r.subtle.digest(e,t):new Promise((function(n,o){var i=r.subtle.digest({name:e},t);i.oncomplete=function(e){n(e.target.result)},i.onerror=o}))}r.d(t,"a",(function(){return o}))},EA7maB9Wfu:function(e,t,r){var n=r("zZ0Hk5Gn4d"),o=r("Ioao80sTOn"),i=r("wclGpud9cG");e.exports=function(e,t){return i(o(e,t,n),e+"")}},Eik2blTx9V:function(e,t,r){"use strict";var n=r("q1tIBJhxTW"),o=r("sEfCy7DpNs"),i=r.n(o),a=r("CMvHH+d1uS"),s=r("TSYQbtd+U2"),c=r.n(s),u=r("8Wpvjplx0g");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=700,g=1e3,k=1500,O=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);t.a=function(e){var t,r;return r=t=function(t){function r(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),t=function(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?y(e):t}(this,d(r).call(this,e)),m(y(t),"onResize",i()((function(e){var r=e.bounds.width;t.setState({size:t.getSize(r)})}),500)),m(y(t),"innerRef",(function(e){t.innerElement=e})),m(y(t),"getInnerElement",(function(){return t.innerElement})),t.state={size:e.size||t.getSize(window.innerWidth)},t}var o,s,O;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,t),o=r,(s=[{key:"getSize",value:function(e){var t=u.Pd;return e<=v?t=u.Od:e<=g?t=u.Nd:e<=k&&(t=u.Md),t}},{key:"render",value:function(){var t,r=this,o=this.props,i=o.isTouch,s=o.size,l=o.className,h=o.componentRef,d=p(o,["isTouch","size","className","componentRef"]),y=s===u.Md,b=s===u.Nd,v=s===u.Od,g=s===u.Pd,k=!v&&!y&&!b&&!g;if([v,b,y,g].filter((function(e){return e})).length>1)throw new Error("Box UI Element cannot be small or medium or large or very large at the same time");if(!k)return n.createElement(e,f({ref:h,className:l,isLarge:y,isMedium:b,isSmall:v,isTouch:i,isVeryLarge:g},d));var O=this.state.size;v=O===u.Od,b=O===u.Nd,y=O===u.Md,g=O===u.Pd;var w=c()((m(t={},u.n,v),m(t,u.m,b),m(t,u.o,i),t),l);return n.createElement(a.default,{bounds:!0,innerRef:this.innerRef,onResize:this.onResize},(function(t){var o=t.measureRef;return n.createElement(e,f({ref:h,className:w,getInnerRef:r.getInnerElement,isLarge:y,isMedium:b,isSmall:v,isTouch:i,isVeryLarge:g,measureRef:o},d))}))}}])&&h(o.prototype,s),O&&h(o,O),r}(n.PureComponent),m(t,"defaultProps",{className:"",isTouch:O}),r}},FK3KWhmfP1:function(e,t,r){"use strict";var n=r("vN+2IcUykn"),o=r.n(n),i=r("GODclIc8p8"),a=r.n(i),s=r("YrhTq/oyJV"),c=r("BweDcK5eOp"),u=r("DUBYMsvOMy");function l(e,t,r){"use asm";var n=new e.Int32Array(r);function o(e,t){e=e|0;t=t|0;var r=0,o=0,i=0,a=0,s=0,c=0,u=0,l=0,f=0,p=0,h=0,d=0,y=0,b=0;i=n[t+320>>2]|0;s=n[t+324>>2]|0;u=n[t+328>>2]|0;f=n[t+332>>2]|0;h=n[t+336>>2]|0;for(r=0;(r|0)<(e|0);r=r+64|0){a=i;c=s;l=u;p=f;d=h;for(o=0;(o|0)<64;o=o+4|0){b=n[r+o>>2]|0;y=((i<<5|i>>>27)+(s&u|~s&f)|0)+((b+h|0)+1518500249|0)|0;h=f;f=u;u=s<<30|s>>>2;s=i;i=y;n[e+o>>2]=b}for(o=e+64|0;(o|0)<(e+80|0);o=o+4|0){b=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;y=((i<<5|i>>>27)+(s&u|~s&f)|0)+((b+h|0)+1518500249|0)|0;h=f;f=u;u=s<<30|s>>>2;s=i;i=y;n[o>>2]=b}for(o=e+80|0;(o|0)<(e+160|0);o=o+4|0){b=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;y=((i<<5|i>>>27)+(s^u^f)|0)+((b+h|0)+1859775393|0)|0;h=f;f=u;u=s<<30|s>>>2;s=i;i=y;n[o>>2]=b}for(o=e+160|0;(o|0)<(e+240|0);o=o+4|0){b=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;y=((i<<5|i>>>27)+(s&u|s&f|u&f)|0)+((b+h|0)-1894007588|0)|0;h=f;f=u;u=s<<30|s>>>2;s=i;i=y;n[o>>2]=b}for(o=e+240|0;(o|0)<(e+320|0);o=o+4|0){b=(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])<<1|(n[o-12>>2]^n[o-32>>2]^n[o-56>>2]^n[o-64>>2])>>>31;y=((i<<5|i>>>27)+(s^u^f)|0)+((b+h|0)-899497514|0)|0;h=f;f=u;u=s<<30|s>>>2;s=i;i=y;n[o>>2]=b}i=i+a|0;s=s+c|0;u=u+l|0;f=f+p|0;h=h+d|0}n[t+320>>2]=i;n[t+324>>2]=s;n[t+328>>2]=u;n[t+332>>2]=f;n[t+336>>2]=h}return{hash:o}}var f=function(){var e=new Blob(["const RushaCore = ".concat(l.toString()),";\n",'function Rusha(e){for(var r=function(e){if("string"==typeof e)return"string";if(e instanceof Array)return"array";if("undefined"!=typeof global&&global.Buffer&&global.Buffer.isBuffer(e))return"buffer";if(e instanceof ArrayBuffer)return"arraybuffer";if(e.buffer instanceof ArrayBuffer)return"view";if(e instanceof Blob)return"blob";throw new Error("Unsupported data type.")},n={fill:0},t=function(e){for(e+=9;e%64>0;e+=1);return e},a=function(e,r,n,t,a){var f,s=this,i=a%4,h=(t+i)%4,u=t-h;switch(i){case 0:e[a]=s[n+3];case 1:e[a+1-(i<<1)|0]=s[n+2];case 2:e[a+2-(i<<1)|0]=s[n+1];case 3:e[a+3-(i<<1)|0]=s[n]}if(!(t<h+i)){for(f=4-i;f<u;f=f+4|0)r[a+f>>2|0]=s[n+f]<<24|s[n+f+1]<<16|s[n+f+2]<<8|s[n+f+3];switch(h){case 3:e[a+u+1|0]=s[n+u+2];case 2:e[a+u+2|0]=s[n+u+1];case 1:e[a+u+3|0]=s[n+u]}}},f=function(e){switch(r(e)){case"string":return function(e,r,n,t,a){var f,s=this,i=a%4,h=(t+i)%4,u=t-h;switch(i){case 0:e[a]=s.charCodeAt(n+3);case 1:e[a+1-(i<<1)|0]=s.charCodeAt(n+2);case 2:e[a+2-(i<<1)|0]=s.charCodeAt(n+1);case 3:e[a+3-(i<<1)|0]=s.charCodeAt(n)}if(!(t<h+i)){for(f=4-i;f<u;f=f+4|0)r[a+f>>2]=s.charCodeAt(n+f)<<24|s.charCodeAt(n+f+1)<<16|s.charCodeAt(n+f+2)<<8|s.charCodeAt(n+f+3);switch(h){case 3:e[a+u+1|0]=s.charCodeAt(n+u+2);case 2:e[a+u+2|0]=s.charCodeAt(n+u+1);case 1:e[a+u+3|0]=s.charCodeAt(n+u)}}}.bind(e);case"array":case"buffer":return a.bind(e);case"arraybuffer":return a.bind(new Uint8Array(e));case"view":return a.bind(new Uint8Array(e.buffer,e.byteOffset,e.byteLength));case"blob":return function(e,r,n,t,a){var f,s=a%4,i=(t+s)%4,h=t-i,u=new Uint8Array(reader.readAsArrayBuffer(this.slice(n,n+t)));switch(s){case 0:e[a]=u[3];case 1:e[a+1-(s<<1)|0]=u[2];case 2:e[a+2-(s<<1)|0]=u[1];case 3:e[a+3-(s<<1)|0]=u[0]}if(!(t<i+s)){for(f=4-s;f<h;f=f+4|0)r[a+f>>2|0]=u[f]<<24|u[f+1]<<16|u[f+2]<<8|u[f+3];switch(i){case 3:e[a+h+1|0]=u[h+2];case 2:e[a+h+2|0]=u[h+1];case 1:e[a+h+3|0]=u[h]}}}.bind(e)}},s=new Array(256),i=0;i<256;i++)s[i]=(i<16?"0":"")+i.toString(16);var h=function(e){for(var r=new Uint8Array(e),n=new Array(e.byteLength),t=0;t<n.length;t++)n[t]=s[r[t]];return n.join("")};!function(e){if(e%64>0)throw new Error("Chunk size must be a multiple of 128 bit");n.offset=0,n.maxChunkLen=e,n.padMaxChunkLen=t(e),n.heap=new ArrayBuffer(function(e){var r;if(e<=65536)return 65536;if(e<16777216)for(r=1;r<e;r<<=1);else for(r=16777216;r<e;r+=16777216);return r}(n.padMaxChunkLen+320+20)),n.h32=new Int32Array(n.heap),n.h8=new Int8Array(n.heap),n.core=new RushaCore({Int32Array:Int32Array,DataView:DataView},{},n.heap),n.buffer=null}(e||65536);var u=function(e,r){n.offset=0;var t=new Int32Array(e,r+320,5);t[0]=1732584193,t[1]=-271733879,t[2]=-1732584194,t[3]=271733878,t[4]=-1009589776},c=function(e,r){var a,f,s,i=t(e),h=new Int32Array(n.heap,0,i>>2);return function(e,r){var n=new Uint8Array(e.buffer),t=r%4,a=r-t;switch(t){case 0:n[a+3]=0;case 1:n[a+2]=0;case 2:n[a+1]=0;case 3:n[a+0]=0}for(var f=1+(r>>2);f<e.length;f++)e[f]=0}(h,e),s=r,(a=h)[(f=e)>>2]|=128<<24-(f%4<<3),a[14+(2+(f>>2)&-16)]=s/(1<<29)|0,a[15+(2+(f>>2)&-16)]=s<<3,i},o=function(e,r,t,a){f(e)(n.h8,n.h32,r,t,a||0)},d=function(e,r,t,a,f){var s=t;o(e,r,t),f&&(s=c(t,a)),n.core.hash(s,n.padMaxChunkLen)},y=function(e,r){var n=new Int32Array(e,r+320,5),t=new Int32Array(5),a=new DataView(t.buffer);return a.setInt32(0,n[0],!1),a.setInt32(4,n[1],!1),a.setInt32(8,n[2],!1),a.setInt32(12,n[3],!1),a.setInt32(16,n[4],!1),t},w=this.rawDigest=function(e){var r=e.byteLength||e.length||e.size||0;u(n.heap,n.padMaxChunkLen);var t=0,a=n.maxChunkLen;for(t=0;r>t+a;t+=a)d(e,t,a,r,!1);return d(e,t,r-t,r,!0),y(n.heap,n.padMaxChunkLen)};this.digest=this.digestFromString=this.digestFromBuffer=this.digestFromArrayBuffer=function(e){return h(w(e).buffer)},this.resetState=function(){return u(n.heap,n.padMaxChunkLen),this},this.append=function(e){var r,t=0,a=e.byteLength||e.length||e.size||0,f=n.offset%n.maxChunkLen;for(n.offset+=a;t<a;)r=Math.min(a-t,n.maxChunkLen-f),o(e,t,r,f),t+=r,(f+=r)===n.maxChunkLen&&(n.core.hash(n.maxChunkLen,n.padMaxChunkLen),f=0);return this},this.getState=function(){var e;if(n.offset%n.maxChunkLen)e=n.heap.slice(0);else{var r=new Int32Array(n.heap,n.padMaxChunkLen+320,5);e=r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}return{offset:n.offset,heap:e}},this.setState=function(e){(n.offset=e.offset,20===e.heap.byteLength)?new Int32Array(n.heap,n.padMaxChunkLen+320,5).set(new Int32Array(e.heap)):n.h32.set(new Int32Array(e.heap));return this};var p=this.rawEnd=function(){var e=n.offset,r=e%n.maxChunkLen,t=c(r,e);n.core.hash(t,n.padMaxChunkLen);var a=y(n.heap,n.padMaxChunkLen);return u(n.heap,n.padMaxChunkLen),a};this.end=function(){return h(p().buffer)}}',";\n","var setupWorker = ",function(){var e=new Rusha;e.resetState();var t=0;self.onmessage=function(r){var n=r.data,o=n.part,i=n.fileSize,a=n.partContents,s=Date.now();try{if(o.offset!==t)throw new Error("Out of order parts given to worker");if(e.append(a),self.postMessage({type:"partDone",part:n.part,duration:Date.now()-s,partContents:a},[a]),t+=o.size,o.offset+o.size===i){var c=e.end();self.postMessage({type:"done",sha1:c})}}catch(e){var u={type:"error",name:e.name,message:e.message,part:o};self.postMessage(u)}}}.toString(),";\n","setupWorker();"],{type:"text/javascript"}),t=(window.URL||window.webkitURL).createObjectURL(e),r=new Worker(t);return r.oldTerminate=r.terminate,r.terminate=function(){(window.URL||window.webkitURL).revokeObjectURL(t),r.oldTerminate()},r},p=r("8Wpvjplx0g"),h=r("mwIZSSbMl2"),d=r.n(h),y=r("TKn7jDHPZc"),b=r("fh8xsLuPZu");function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var P={digestReadahead:5,initialRetryDelayMs:5e3,maxRetryDelayMs:6e4,parallelism:4,requestTimeoutMs:12e4,retries:5},C=function(e){function t(e,r,n){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=function(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?k(e):t}(this,g(t).call(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{shouldRetry:!1}))),w(k(o),"logEvent",(function(e,t){var r={event_type:e};return t&&(r.event_info=t),o.xhr.post({url:o.sessionEndpoints.logEvent,data:r})})),o.config=n||P,o.sessionEndpoints=r,o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(t,e),t}(b.a);function _(e){return(_="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function j(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){S(i,n,o,a,s,"next",e)}function s(e){S(i,n,o,a,s,"throw",e)}a(void 0)}))}}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var T=0,D=2,U=3,M=function(e){function t(e,r,n,i,a,u,l,f,h,b,m,v){var g;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g=function(e,t){return!t||"object"!==_(t)&&"function"!==typeof t?I(e):t}(this,A(t).call(this,e,l,f)),R(I(g),"toJSON",(function(){return JSON.stringify({index:g.index,offset:g.offset,partSize:g.partSize,state:g.state,uploadedBytes:g.uploadedBytes,numUploadRetriesPerformed:g.numUploadRetriesPerformed,numDigestRetriesPerformed:g.numDigestRetriesPerformed,sha256:g.sha256,timing:g.timing})})),R(I(g),"getPart",(function(){return g.data.part||{}})),R(I(g),"upload",(function(){if(!g.isDestroyedOrPaused()){if(!g.sha256)throw new Error("Part SHA-256 unavailable");if(!g.blob)throw new Error("Part blob unavailable");var e={documentHidden:document.hidden,digest_retries:g.numDigestRetriesPerformed,timing:g.timing,parts_uploading:g.getNumPartsUploading()},t={"Content-Type":"application/octet-stream",Digest:"sha-256=".concat(g.sha256),"Content-Range":"bytes ".concat(g.offset,"-").concat(g.rangeEnd,"/").concat(g.fileSize),"X-Box-Client-Event-Info":JSON.stringify(e)};g.state=D,g.startTimestamp=Date.now(),g.xhr.uploadFile({url:g.sessionEndpoints.uploadPart,data:g.blob,headers:t,method:p.Tc,successHandler:g.uploadSuccessHandler,errorHandler:g.uploadErrorHandler,progressHandler:g.uploadProgressHandler,withIdleTimeout:!0,idleTimeoutDuration:g.config.requestTimeoutMs})}})),R(I(g),"uploadSuccessHandler",(function(e){var t=e.data;g.isDestroyedOrPaused()||(g.state=U,g.consoleLog("Upload completed: ".concat(g.toJSON(),".")),g.data=t,g.blob=null,g.timing.uploadTime=Date.now()-g.startTimestamp,g.onSuccess(I(g)),g.uploadedBytes=g.partSize)})),R(I(g),"uploadProgressHandler",(function(e){if(!g.isDestroyedOrPaused()){var t=parseInt(e.loaded,10),r=g.uploadedBytes;g.uploadedBytes=t,g.onProgress(r,t)}})),R(I(g),"uploadErrorHandler",function(){var e=j(regeneratorRuntime.mark((function e(t){var r,n,o,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.isDestroyedOrPaused()){e.next=2;break}return e.abrupt("return");case 2:if(r=d()(g.xhr,"xhr.readyState",null),n=d()(g.xhr,"xhr.statusText",""),g.consoleLog("Upload failure ".concat(t.message," for part ").concat(g.toJSON(),". XHR state: ").concat(r,".")),o={message:t.message,part:{uploadedBytes:g.uploadedBytes,id:g.id,index:g.index,offset:g.offset},xhr_ready_state:r,xhr_status_text:n},i=JSON.stringify(o),g.sessionEndpoints.logEvent?Object(c.a)((function(e,t){g.logEvent("part_failure",i).then(e).catch(t)}),g.config.retries,g.config.initialRetryDelayMs).catch((function(e){return g.consoleLog("Failure in logEvent: ".concat(e.message))})):g.consoleLog("logEvent endpoint not found"),!(g.numUploadRetriesPerformed>=g.config.retries)){e.next=11;break}return g.onError(t,i),e.abrupt("return");case 11:a=Object(s.a)(g.config.initialRetryDelayMs,g.config.maxRetryDelayMs,g.numUploadRetriesPerformed),g.numUploadRetriesPerformed+=1,g.consoleLog("Retrying uploading part ".concat(g.toJSON()," in ").concat(a," ms")),g.retryTimeout=setTimeout(g.retryUpload,a);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),R(I(g),"retryUpload",j(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g.isDestroyedOrPaused()){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,g.listParts(g.index,1);case 5:if(!(t=e.sent)||1!==t.length||t[0].offset!==g.offset||!t[0].part_id){e.next=11;break}return g.consoleLog("Part ".concat(g.toJSON()," is available on server. Not re-uploading.")),g.id=t[0].part_id,g.uploadSuccessHandler({data:{part:t[0]}}),e.abrupt("return");case 11:throw g.consoleLog("Part ".concat(g.toJSON()," is not available on server. Re-uploading.")),new Error("Part not found on the server");case 15:e.prev=15,e.t0=e.catch(2),(r=e.t0.response)&&r.status&&g.consoleLog("Error ".concat(r.status," while listing part ").concat(g.toJSON(),". Re-uploading.")),g.numUploadRetriesPerformed+=1,g.upload();case 21:case"end":return e.stop()}}),e,null,[[2,15]])})))),R(I(g),"listParts",function(){var e=j(regeneratorRuntime.mark((function e(t,r){var n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={offset:t,limit:r},o=Object(y.a)(g.sessionEndpoints.listParts,n),e.next=4,g.xhr.get({url:o});case 4:return i=e.sent,e.abrupt("return",i.data.entries);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),g.index=r,g.numDigestRetriesPerformed=0,g.numUploadRetriesPerformed=0,g.offset=n,g.partSize=i,g.fileSize=a,g.state=T,g.timing={},g.uploadedBytes=0,g.data={},g.config=f,g.rangeEnd=n+i-1,g.rangeEnd>a-1&&(g.rangeEnd=a-1),g.isPaused=!1,g.onSuccess=b||o.a,g.onError=v||o.a,g.onProgress=m||o.a,g.getNumPartsUploading=h,g}var r,n,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),r=t,(n=[{key:"cancel",value:function(){clearTimeout(this.retryTimeout),this.blob=null,this.data={},this.destroy()}},{key:"pause",value:function(){clearTimeout(this.retryTimeout),this.isPaused=!0,this.state=1,this.xhr.abort()}},{key:"unpause",value:function(){this.isPaused=!1,this.state=D,this.retryUpload()}},{key:"reset",value:function(){this.numUploadRetriesPerformed=0,this.timing={},this.uploadedBytes=0}},{key:"isDestroyedOrPaused",value:function(){return this.isDestroyed()||this.isPaused}}])&&E(r.prototype,n),i&&E(r,i),t}(C);function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){G(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function B(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){F(i,n,o,a,s,"next",e)}function s(e){F(i,n,o,a,s,"throw",e)}a(void 0)}))}}function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K="create_session_misc_error",J="create_session_retries_exceeded",V="part_upload_retries_exceeded",Q="commit_retries_exceeded",Y="web_worker_error",Z="file_reader_received_not_found_error",$="part_digest_retries_exceeded",ee=function(e){function t(e,r){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=function(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?z(e):t}(this,W(t).call(this,e,{createSession:null,uploadPart:null,listParts:null,commit:null,abort:null,logEvent:null},r)),G(z(n),"getBaseUploadUrlFromPreflightResponse",(function(e){var t=e.data;if(!t||!t.upload_url)return n.getBaseUploadUrl();var r=t.upload_url.split("/");return n.uploadHost="".concat(r[0],"//").concat(r[2]),n.getBaseUploadUrl()})),G(z(n),"preflightSuccessHandler",function(){var e=B(regeneratorRuntime.mark((function e(t){var r,o,i,a,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isDestroyed()){e.next=2;break}return e.abrupt("return");case 2:return r=n.getBaseUploadUrlFromPreflightResponse(t),(o="".concat(r,"/files/upload_sessions")).includes("fupload-ec2")&&(n.config.parallelism=1),i={file_size:n.file.size,file_name:n.fileName},n.fileId?o=o.replace("upload_sessions","".concat(n.fileId,"/upload_sessions")):i.folder_id=n.folderId,e.prev=7,e.next=10,n.xhr.post({url:o,data:i});case 10:a=e.sent,n.createSessionSuccessHandler(a.data),e.next=31;break;case 14:if(e.prev=14,e.t0=e.catch(7),!((s=n.getErrorResponse(e.t0))&&s.status>=500&&s.status<600)){e.next=20;break}return n.createSessionErrorHandler(e.t0),e.abrupt("return");case 20:if(!s||409!==s.status||"session_conflict"!==s.code){e.next=23;break}return n.createSessionSuccessHandler(s.context_info.session),e.abrupt("return");case 23:if(!(s&&s.status===p.Wc&&s.code===p.Hb||s.status===p.Wc&&"access_denied_insufficient_permissions"===s.code)){e.next=26;break}return n.errorCallback(s),e.abrupt("return");case 26:if(!s||409!==s.status){e.next=30;break}return n.resolveConflict(s),n.createSessionRetry(),e.abrupt("return");case 30:n.sessionErrorHandler(e.t0,K,JSON.stringify(e.t0));case 31:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}()),G(z(n),"createSessionErrorHandler",(function(e){n.isDestroyed()||(n.createSessionNumRetriesPerformed<n.config.retries?n.createSessionRetry():(n.consoleLog("Too many create session failures, failing upload"),n.sessionErrorHandler(e,J,JSON.stringify(e))))})),G(z(n),"getSessionInfo",B(regeneratorRuntime.mark((function e(){var t,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.getBaseUploadUrl(),r="".concat(t,"/files/upload_sessions/").concat(n.sessionId),e.prev=2,e.next=5,n.xhr.get({url:r});case 5:o=e.sent,n.getSessionSuccessHandler(o.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),n.getSessionErrorHandler(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))),G(z(n),"partUploadSuccessHandler",(function(e){n.numPartsUploading-=1,n.numPartsUploaded+=1,n.updateProgress(e.uploadedBytes,n.partSize),n.processNextParts()})),G(z(n),"partUploadErrorHandler",(function(e,t){if(n.sessionErrorHandler(e,V,t),n.isResumableUploadsEnabled)for(var r=n.firstUnuploadedPartIndex;n.numPartsUploading>0;){var o=n.parts[r];o&&o.state===D&&(o.reset(),o.pause(),n.numPartsUploading-=1,n.numPartsDigestReady+=1),r+=1}})),G(z(n),"updateProgress",(function(e,t){n.isDestroyed()||(n.totalUploadedBytes+=t-e,n.progressCallback({loaded:n.totalUploadedBytes,total:n.file.size}))})),G(z(n),"processNextParts",(function(){if(!n.failSessionIfFileChangeDetected())if(n.numPartsUploaded===n.parts.length&&n.fileSha1)n.commitSession();else{for(n.updateFirstUnuploadedPartIndex();n.canStartMorePartUploads();)n.uploadNextPart();n.shouldComputeDigestForNextPart()&&n.computeDigestForNextPart()}})),G(z(n),"onWorkerMessage",(function(e){if(!n.isDestroyed()){var t,r=e.data;if("partDone"===r.type){n.numPartsDigestComputing-=1;var o=r.part;n.parts[o.index].timing.fileDigestTime=r.duration,n.processNextParts()}else"done"===r.type?(n.fileSha1=(t=r.sha1,btoa(String.fromCharCode.apply(null,t.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))),n.sha1Worker.terminate(),n.processNextParts()):"error"===r.type&&n.sessionErrorHandler(null,Y,JSON.stringify(r))}})),G(z(n),"sendPartToWorker",(function(e,t){if(!n.isDestroyed()){var r={index:e.index,offset:e.offset,size:e.partSize};n.sha1Worker.postMessage({part:r,fileSize:n.file.size,partContents:t},[t]),n.consoleLog("Part sent to worker: ".concat(JSON.stringify(e),".}"))}})),G(z(n),"onPartDigestError",(function(e,t){if(n.consoleLog("Error computing digest for part ".concat(JSON.stringify(t),": ").concat(JSON.stringify(e))),"NotFoundError"!==e.name&&"NOT_FOUND_ERR"!==e.name){if(!n.failSessionIfFileChangeDetected())if(t.numDigestRetriesPerformed>=n.config.retries)n.sessionErrorHandler(null,$,JSON.stringify(e));else{var r=Object(s.a)(n.config.initialRetryDelayMs,n.config.maxRetryDelayMs,t.numDigestRetriesPerformed);t.numDigestRetriesPerformed+=1,n.consoleLog("Retrying digest work for part ".concat(JSON.stringify(t)," in ").concat(r," ms")),setTimeout((function(){n.computeDigestForPart(t)}),r)}}else n.sessionErrorHandler(null,Z,JSON.stringify(e))})),G(z(n),"commitSession",(function(){if(!n.isDestroyed()){var e={totalPartReadTime:0,totalPartDigestTime:0,totalFileDigestTime:0,totalPartUploadTime:0},t={parts:n.parts.map((function(t){return e.totalPartReadTime+=t.timing.readTime,e.totalPartDigestTime+=t.timing.subtleCryptoTime,e.totalFileDigestTime+=t.timing.fileDigestTime,e.totalPartUploadTime+=t.timing.uploadTime,t.getPart()})).sort((function(e,t){return e.offset-t.offset})),attributes:{}},r=Object(s.k)(n.file);r&&(t.attributes.content_modified_at=r);var o={avg_part_read_time:Math.round(e.totalPartReadTime/n.parts.length),avg_part_digest_time:Math.round(e.totalPartDigestTime/n.parts.length),avg_file_digest_time:Math.round(e.totalFileDigestTime/n.parts.length),avg_part_upload_time:Math.round(e.totalPartUploadTime/n.parts.length)},i=n.fileSha1,a={Digest:"sha=".concat(i),"X-Box-Client-Event-Info":JSON.stringify(o)};n.xhr.post({url:n.sessionEndpoints.commit,data:t,headers:a}).then(n.commitSessionSuccessHandler).catch(n.commitSessionErrorHandler)}})),G(z(n),"commitSessionSuccessHandler",(function(e){if(!n.isDestroyed()){var t=e.status,r=e.data;if(202!==t){var o=r.entries;!o&&r.id&&(o=[r]),n.destroy(),n.successCallback&&o&&n.successCallback(o)}else n.commitSessionRetry(e)}})),G(z(n),"commitSessionErrorHandler",(function(e){if(!n.isDestroyed()){var t=e.response;if(t)return n.commitRetryCount>=n.config.retries?(n.consoleLog("Too many commit failures, failing upload"),void n.sessionErrorHandler(e,Q,JSON.stringify(e))):void n.commitSessionRetry(t);n.consoleError(e)}})),G(z(n),"getNumPartsUploading",(function(){return n.numPartsUploading})),n.parts=[],n.options=e,n.fileSha1=null,n.totalUploadedBytes=0,n.numPartsNotStarted=0,n.numPartsDigestComputing=0,n.numPartsDigestReady=0,n.numPartsUploading=0,n.numPartsUploaded=0,n.firstUnuploadedPartIndex=0,n.createSessionNumRetriesPerformed=0,n.partSize=0,n.commitRetryCount=0,n.clientId=null,n.isResumableUploadsEnabled=!1,n.numResumeRetries=0,n}var r,n,i,l,h,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),r=t,(n=[{key:"reset",value:function(){this.parts=[],this.fileSha1=null,this.totalUploadedBytes=0,this.numPartsNotStarted=0,this.numPartsDigestComputing=0,this.numPartsDigestReady=0,this.numPartsUploading=0,this.numPartsUploaded=0,this.firstUnuploadedPartIndex=0,this.createSessionNumRetriesPerformed=0,this.partSize=0,this.commitRetryCount=0,this.numResumeRetries=0}},{key:"setFileInfo",value:function(e){var t=e.file,r=e.folderId,n=e.errorCallback,i=e.progressCallback,a=e.successCallback,s=e.overwrite,c=void 0===s||s,u=e.fileId;this.file=t,this.fileName=this.file.name,this.folderId=r,this.errorCallback=n||o.a,this.progressCallback=i||o.a,this.successCallback=a||o.a,this.overwrite=c,this.fileId=u}},{key:"upload",value:function(e){var t=e.file,r=e.folderId,n=e.errorCallback,i=e.progressCallback,a=e.successCallback,c=e.overwrite,u=void 0===c||c,l=e.fileId;this.file=t,this.fileName=this.file.name,this.initialFileSize=this.file.size,this.initialFileLastModified=Object(s.k)(this.file),this.folderId=r,this.errorCallback=n||o.a,this.progressCallback=i||o.a,this.successCallback=a||o.a,this.sha1Worker=f(),this.sha1Worker.addEventListener("message",this.onWorkerMessage),this.overwrite=u,this.fileId=l,this.makePreflightRequest()}},{key:"createSessionRetry",value:function(){var e=Object(s.a)(this.config.initialRetryDelayMs,this.config.maxRetryDelayMs,this.createSessionNumRetriesPerformed);this.createSessionNumRetriesPerformed+=1,this.consoleLog("Retrying create session in ".concat(e," ms")),this.createSessionTimeout=setTimeout(this.makePreflightRequest,e)}},{key:"createSessionSuccessHandler",value:function(e){if(!this.isDestroyed()){var t=e.id,r=e.part_size,n=e.session_endpoints;this.sessionId=t,this.partSize=r,this.sessionEndpoints=L({},this.sessionEndpoints,{uploadPart:n.upload_part,listParts:n.list_parts,commit:n.commit,abort:n.abort,logEvent:n.log_event}),this.populateParts(),this.processNextParts()}}},{key:"resume",value:function(e){var t=e.file,r=e.folderId,n=e.errorCallback,o=e.progressCallback,i=e.sessionId,a=e.successCallback,s=e.overwrite,c=void 0===s||s,u=e.fileId;this.setFileInfo({file:t,folderId:r,errorCallback:n,progressCallback:o,successCallback:a,overwrite:c,fileId:u}),this.sessionId=i,this.sha1Worker||(this.sha1Worker=f()),this.sha1Worker.addEventListener("message",this.onWorkerMessage),this.getSessionInfo()}},{key:"getSessionSuccessHandler",value:function(e){var t=e.part_size,r=e.session_endpoints;this.partSize=t,this.sessionEndpoints=L({},this.sessionEndpoints,{uploadPart:r.upload_part,listParts:r.list_parts,commit:r.commit,abort:r.abort,logEvent:r.log_event}),this.processNextParts()}},{key:"getSessionErrorHandler",value:function(e){if(!this.isDestroyed()){var t=this.getErrorResponse(e);if(this.numResumeRetries>this.config.retries)this.errorCallback(t);else if(t&&429===t.status){var r=p.H;if(t.headers){var n=parseInt(t.headers["retry-after"]||t.headers.get("Retry-After"),10);a()(n)||(r=n*p.od)}this.retryTimeout=setTimeout(this.getSessionInfo,r),this.numResumeRetries+=1}else if(t&&t.status>=400&&t.status<500){this.parts.forEach((function(e){e.cancel()})),this.reset(),clearTimeout(this.createSessionTimeout),clearTimeout(this.commitSessionTimeout),this.abortSession();var o={file:this.file,folderId:this.folderId,errorCallback:this.errorCallback,progressCallback:this.progressCallback,successCallback:this.successCallback,overwrite:this.overwrite,fileId:this.fileId};this.upload(o)}else this.retryTimeout=setTimeout(this.getSessionInfo,Math.pow(2,this.numResumeRetries)*p.od),this.numResumeRetries+=1}}},{key:"sessionErrorHandler",value:(d=B(regeneratorRuntime.mark((function e(t,r,n){var o,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isResumableUploadsEnabled||this.destroy(),o=this.getErrorResponse(t),this.errorCallback(o),e.prev=3,this.sessionEndpoints.logEvent){e.next=6;break}throw new Error("logEvent endpoint not found");case 6:return e.next=8,Object(c.a)((function(e,t){i.logEvent(r,n).then(e).catch(t)}),this.config.retries,this.config.initialRetryDelayMs);case 8:this.isResumableUploadsEnabled||this.abortSession(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.isResumableUploadsEnabled||this.abortSession();case 14:case"end":return e.stop()}}),e,this,[[3,11]])}))),function(e,t,r){return d.apply(this,arguments)})},{key:"abortSession",value:function(){var e=this;this.sha1Worker&&this.sha1Worker.terminate(),this.sessionEndpoints.abort&&this.sessionId&&this.xhr.delete({url:this.sessionEndpoints.abort}).then((function(){e.sessionId=""}))}},{key:"shouldComputeDigestForNextPart",value:function(){return!this.isDestroyed()&&0===this.numPartsDigestComputing&&this.numPartsNotStarted>0&&this.numPartsDigestReady<this.config.digestReadahead}},{key:"computeDigestForNextPart",value:function(){for(var e=this.firstUnuploadedPartIndex;e<this.parts.length;e+=1){var t=this.parts[e];if(t.state===T)return this.numPartsNotStarted-=1,this.numPartsDigestComputing+=1,void this.computeDigestForPart(t)}}},{key:"computeDigestForPart",value:(h=B(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,s,c,l,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.file.slice(t.offset,t.offset+this.partSize),n=new window.FileReader,o=Date.now(),e.prev=3,e.next=6,this.readFile(n,r);case 6:return i=e.sent,a=i.buffer,s=i.readCompleteTimestamp,e.next=11,Object(u.a)("SHA-256",a);case 11:c=e.sent,l=btoa([].reduce.call(new Uint8Array(c),(function(e,t){return e+String.fromCharCode(t)}),"")),this.sendPartToWorker(t,a),t.sha256=l,t.state=1,t.blob=r,this.numPartsDigestReady+=1,f=Date.now(),t.timing={partDigestTime:f-o,readTime:s-o,subtleCryptoTime:f-s},this.processNextParts(),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),this.onPartDigestError(e.t0,t);case 26:case"end":return e.stop()}}),e,this,[[3,23]])}))),function(e){return h.apply(this,arguments)})},{key:"commitSessionRetry",value:function(e){var t=e.status,r=e.headers,n=p.H;if(r){var o=parseInt(r["retry-after"],10);Number.isNaN(o)||(n=1e3*o)}var i=Object(s.a)(this.config.initialRetryDelayMs,this.config.maxRetryDelayMs,this.commitRetryCount);202!==t&&(this.commitRetryCount+=1);var a=n||i;this.consoleLog("Retrying commit in ".concat(a," ms")),this.commitSessionTimeout=setTimeout(this.commitSession,a)}},{key:"uploadNextPart",value:function(){for(var e=this.firstUnuploadedPartIndex;e<this.parts.length;e+=1){var t=this.parts[e];if(1===t.state){this.numPartsDigestReady-=1,this.numPartsUploading+=1,t.isPaused?t.unpause():t.upload();break}}}},{key:"canStartMorePartUploads",value:function(){return!this.isDestroyed()&&this.numPartsUploading<this.config.parallelism&&this.numPartsDigestReady>0}},{key:"updateFirstUnuploadedPartIndex",value:function(){for(var e=this.parts[this.firstUnuploadedPartIndex];e&&e.state===U;)this.firstUnuploadedPartIndex+=1,e=this.parts[this.firstUnuploadedPartIndex]}},{key:"populateParts",value:function(){this.numPartsNotStarted=Math.ceil(this.file.size/this.partSize);for(var e=0;e<this.numPartsNotStarted;e+=1){var t=e*this.partSize,r=Math.min(t+this.partSize,this.file.size)-t,n=new M(this.options,e,t,r,this.file.size,this.sessionId,this.sessionEndpoints,this.config,this.getNumPartsUploading,this.partUploadSuccessHandler,this.updateProgress,this.partUploadErrorHandler);this.parts.push(n)}}},{key:"failSessionIfFileChangeDetected",value:function(){var e=this.file.size,t=Object(s.k)(this.file);return(e!==this.initialFileSize||t!==this.initialFileLastModified)&&(this.sessionErrorHandler(null,"file_changed_during_upload",JSON.stringify({oldSize:this.initialFileSize,newSize:e,oldLastModified:this.initialFileLastModified,newLastModified:t})),!0)}},{key:"cancel",value:function(){this.isDestroyed()||(this.parts.forEach((function(e){e.cancel()})),this.parts=[],clearTimeout(this.createSessionTimeout),clearTimeout(this.commitSessionTimeout),this.abortSession(),this.destroy())}},{key:"resolveConflict",value:(l=B(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.overwrite||!t.context_info){e.next=3;break}return this.fileId=t.context_info.conflicts.id,e.abrupt("return");case 3:r=this.fileName.substr(this.fileName.lastIndexOf("."))||"",this.fileName="".concat(this.fileName.substr(0,this.fileName.lastIndexOf(".")),"-").concat(Date.now()).concat(r);case 5:case"end":return e.stop()}}),e,this)}))),function(e){return l.apply(this,arguments)})},{key:"getErrorResponse",value:function(e){if(!e)return{};var t=e.response;return t?401===t.status?t:t.data:{}}}])&&q(r.prototype,n),i&&q(r,i),t}(C);t.a=ee},"Jdck50bD+l":function(e,t,r){"use strict";var n=r("AkPpBUyl/w");r.d(t,"a",(function(){return n.a}))},JmpYOFvNxD:function(e,t,r){var n=r("eUghvDZG6g");e.exports=function(e,t){return n(t,(function(t){return e[t]}))}},"LsHQb/8VRx":function(e,t,r){var n=r("EA7maB9Wfu"),o=r("mv/X/lT0Yx");e.exports=function(e){return n((function(t,r){var n=-1,i=r.length,a=i>1?r[i-1]:void 0,s=i>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,s&&o(r[0],r[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++n<i;){var c=r[n];c&&e(t,c,n,a)}return t}))}},"NR/qkXUXgp":function(e,t,r){"use strict";var n=r("q1tIBJhxTW"),o=r.n(n),i=r("JRPeW/Ew/U");t.a=function(e){var t=e.language,r=e.messages,a=e.children;if(!!t&&!!r){var s=t&&t.substr(0,t.indexOf("-"));return o.a.createElement(i.IntlProvider,{locale:s,messages:r},a)}return n.Children.only(a)}},OFL0i0gLuj:function(e,t,r){var n=r("lvO4QcjowG"),o=r("4sDhcbmZ70");e.exports=function(e,t){return null!=e&&o(e,t,n)}},"P/G1/AIOfM":function(e,t,r){var n=r("JmpYOFvNxD"),o=r("7GkXteOAfp");e.exports=function(e){return null==e?[]:n(e,o(e))}},PRoclJX2va:function(e,t,r){"use strict";var n=r("fn3w3TIrL6"),o=r("8Wpvjplx0g");t.a=function(e,t,r,i){var a=[];return e.forEach((function(e){var s,c=e.id,u=e.type;if(!c||!u)throw Object(n.a)();switch(u){case o.ze:s=t;break;case o.ye:s=r;break;case o.Ae:s=i;break;default:throw new Error("Unknown Type!")}var l=s.getCache(),f=s.getCacheKey(c);l.has(f)?l.merge(f,e):l.set(f,e),a.push(f)})),a}},QkVNESsdth:function(e,t,r){var n=r("+QkaJiEUcy"),o=r("LsHQb/8VRx")((function(e,t,r){n(e,t,r)}));e.exports=o},SN9E8qYgiE:function(e,t,r){},ScQNpb9SoF:function(e,t,r){"use strict";var n=r("JRPeW/Ew/U"),o=Object(n.defineMessages)({uploadsSucceededNotification:{id:"enduser.uploads.uploadsSucceededNotification",defaultMessage:"{number, plural, one {# item was} other {# items were}} uploaded successfully."},uploadsFailedNotification:{id:"enduser.uploads.uploadsFailedNotification",defaultMessage:"Oops! {number, plural, one {# item} other {# items}} failed to upload."},resumableUploadsFailedNotification:{id:"enduser.uploads.resumableUploadsFailedNotification",defaultMessage:"Oops! {number, plural, one {# item} other {# items}} failed to upload."},insufficientPermissionsNotification:{id:"enduser.uploads.insufficientPermissionsNotification",defaultMessage:"Oops! There's an error due to insufficient permissions."},uploadMenuItem:{id:"enduser.uploads.uploadMenuItem",defaultMessage:"Upload New Version"},uploadInProgressNavigateAlertMessage:{id:"enduser.uploads.uploadInProgressNavigateAlertMessage",defaultMessage:"Are you sure you want to leave this page?"}});t.a=o},T1AVtgJeLR:function(e,t,r){var n=r("t2Dn8I5vat"),o=r("5Tg0u6uwZJ"),i=r("yP5fRQ0J/N"),a=r("Q1l47MKQcZ"),s=r("+iFOCR56jT"),c=r("03A+Z4JQ8P"),u=r("Z0cmtJMNoo"),l=r("3L66sp1yaN"),f=r("DSREsfMdcs"),p=r("lSCDUmRYHh"),h=r("GoyQGQ25b1"),d=r("YO3V7jI8Hn"),y=r("c6wGSYmtGM"),b=r("itsjJeh/nX"),m=r("jeLoPZsM55");e.exports=function(e,t,r,v,g,k,O){var w=b(e,r),P=b(t,r),C=O.get(P);if(C)n(e,r,C);else{var _=k?k(w,P,r+"",e,t,O):void 0,S=void 0===_;if(S){var j=u(P),E=!j&&f(P),A=!j&&!E&&y(P);_=P,j||E||A?u(w)?_=w:l(w)?_=a(w):E?(S=!1,_=o(P,!0)):A?(S=!1,_=i(P,!0)):_=[]:d(P)||c(P)?(_=w,c(w)?_=m(w):h(w)&&!p(w)||(_=s(P))):S=!1}S&&(O.set(P,_),g(_,P,v,k,O),O.delete(P)),n(e,r,_)}}},"UEG+jKo9oH":function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"VqrN+CpLF1":function(e,t,r){"use strict";var n=r("vN+2IcUykn"),o=r.n(n),i=r("PRoclJX2va"),a=r("7EA+m7Wkjh"),s=r("fn3w3TIrL6"),c=r("k1oiGGP5HG"),u=r("dEgP6Cehtk"),l=r("5mCW88DpfN"),f=r("8Wpvjplx0g");function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=function(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?m(e):t}(this,(e=b(t)).call.apply(e,[this].concat(o))),g(m(r),"folderSuccessHandler",(function(e){var n=e.data;if(!r.isDestroyed()){var o=n.item_collection;if(!o)throw Object(s.a)();var a=o.entries,c=o.total_count,f=o.limit,p=o.offset;if(!Array.isArray(a)||"number"!==typeof c||"number"!==typeof f||"number"!==typeof p)throw Object(s.a)();var h=Object(i.a)(a,new t(r.options),new u.a(r.options),new l.a(r.options));r.itemCache=(r.itemCache||[]).concat(h),r.getCache().set(r.key,d({},n,{item_collection:d({},o,{entries:r.itemCache})})),r.finish()}})),g(m(r),"folderDetailsSuccessHandler",(function(e){var t=e.data;if(!r.isDestroyed()){var n=d({},r.getCache().get(r.key),{},t);r.getCache().set(r.key,n),r.successCallback(n)}})),g(m(r),"createSuccessHandler",(function(e){var t=e.data,n=t.id;if(!r.isDestroyed()&&n){var o=r.getCacheKey(n),i=r.getCache(),a=i.get(r.key);if(a){var c=a.item_collection;if(!c)throw Object(s.a)();var u=c.total_count,l=c.entries;if(!Array.isArray(l)||"number"!==typeof u)throw Object(s.a)();i.set(o,t),c.entries=[o].concat(l),c.total_count=u+1,r.successCallback(t)}else r.successCallback(t)}})),r}var r,n,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(f.f).concat(e)}},{key:"getUrl",value:function(e){var t=e?"/".concat(e):"";return"".concat(this.getBaseApiUrl(),"/folders").concat(t)}},{key:"isLoaded",value:function(){return this.getCache().has(this.key)}},{key:"finish",value:function(){if(!this.isDestroyed()){var e=this.getCache(),t=e.get(this.key),r=t.id,n=t.name,o=t.permissions,i=t.path_collection,a=t.item_collection;if(!a||!i)throw Object(s.a)();var c=a.entries,u=a.offset,l=a.total_count;if(!Array.isArray(c)||"number"!==typeof l)throw Object(s.a)();var f={id:r,name:n,offset:u,percentLoaded:100,permissions:o,boxItem:t,breadcrumbs:i.entries,items:c.map((function(t){return e.get(t)})),sortBy:this.sortBy,sortDirection:this.sortDirection,totalCount:l};this.successCallback(f)}}},{key:"folderRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fields,r=e.noPagination,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.folderSuccessHandler;if(this.isDestroyed())return Promise.reject();var o=t||a.e;this.errorCode=f.cb;var i={fields:o.toString()};return r||(i=d({},i,{direction:this.sortDirection.toLowerCase(),limit:this.limit,offset:this.offset,fields:o.toString(),sort:this.sortBy.toLowerCase()})),this.xhr.get({url:this.getUrl(this.id),params:i,headers:o.includes(f.rc)?{"X-Rep-Hints":f.Ne}:{}}).then(n).catch(this.errorHandler)}},{key:"getFolderFields",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this.isDestroyed()||(this.id=e,this.key=this.getCacheKey(e),this.successCallback=t,this.errorCallback=r,this.folderRequest(d({},n,{noPagination:!0}),this.folderDetailsSuccessHandler))}},{key:"getFolder",value:function(e,t,r,n,o,i,a){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};this.isDestroyed()||(this.id=e,this.key=this.getCacheKey(e),this.limit=t,this.offset=r,this.sortBy=n,this.sortDirection=o,this.successCallback=i,this.errorCallback=a,s.forceFetch&&this.getCache().unset(this.key),this.isLoaded()?this.finish():this.folderRequest(s))}},{key:"folderCreateRequest",value:function(e){if(this.isDestroyed())return Promise.reject();this.errorCode=f.K;var t="".concat(this.getUrl(),"?fields=").concat(a.e.toString());return this.xhr.post({url:t,data:{name:e,parent:{id:this.id}}}).then(this.createSuccessHandler).catch(this.errorHandler)}},{key:"create",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.a;this.isDestroyed()||(this.id=e,this.key=this.getCacheKey(e),this.successCallback=r,this.errorCallback=n,this.folderCreateRequest(t))}}])&&y(r.prototype,n),c&&y(r,c),t}(c.a);t.a=k},"YrhTq/oyJV":function(e,t,r){"use strict";r.d(t,"a",(function(){return d})),r.d(t,"b",(function(){return l})),r.d(t,"c",(function(){return p})),r.d(t,"d",(function(){return O})),r.d(t,"e",(function(){return y})),r.d(t,"f",(function(){return u})),r.d(t,"g",(function(){return f})),r.d(t,"h",(function(){return v})),r.d(t,"i",(function(){return m})),r.d(t,"j",(function(){return k})),r.d(t,"k",(function(){return h})),r.d(t,"l",(function(){return b})),r.d(t,"m",(function(){return w}));var n=r("mwIZSSbMl2"),o=r.n(n);function i(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}var a={};function s(e){return!(!e.options||!e.file)}function c(e){return!(!e.options||!e.item)}function u(e){return s(e)?e.file:e}function l(e){return c(e)?e.item:e}function f(e){return s(e)&&e.options||a}function p(e){return c(e)&&e.options||a}function h(e){var t,r=e.lastModified||e.lastModifiedDate;if(r&&("string"===typeof r||"number"===typeof r||r instanceof Date)){var n=new Date(r);if(t=n,"[object Date]"===Object.prototype.toString.call(t)&&!Number.isNaN(t.getTime()))return function(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}(n)}return null}function d(e,t,r){var n=e*Math.pow(r,2);return n>t?t:n}function y(e){return(e.webkitGetAsEntry||e.mozGetAsEntry||e.getAsEntry).call(e)}function b(e){var t=y(l(e));return!!t&&t.isDirectory}function m(e){return new Promise((function(t){e.file((function(e){t(e)}))}))}function v(e){return g.apply(this,arguments)}function g(){var e;return e=regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l(t),n=y(r)){e.next=4;break}return e.abrupt("return",null);case 4:return e.next=6,m(n);case 6:if(o=e.sent,!c(t)){e.next=9;break}return e.abrupt("return",{file:o,options:p(t)});case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})),(g=function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)}))}).apply(this,arguments)}function k(e,t){if(!s(e))return e.name;var r=e,n=o()(r,"options.folderId",t),i=o()(r,"options.uploadInitTimestamp",Date.now()),a=r.file.webkitRelativePath||r.file.name;return"".concat(a,"_").concat(n,"_").concat(i)}function O(e,t){var r=y(l(e)).name,n=p(e),o=n.folderId,i=void 0===o?t:o,a=n.uploadInitTimestamp,s=void 0===a?Date.now():a;return"".concat(r,"_").concat(i,"_").concat(s)}function w(){var e=window.crypto||window.msCrypto;return"https:"===window.location.protocol&&e&&e.subtle}},a2jX1cNsCJ:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a}));r("mwIZSSbMl2");var n=r("8Wpvjplx0g");function o(e){return"".concat(n.we).concat(e)}function i(e){return"".concat(n.xe).concat(e)}function a(e){return e.extension===n.Ic}},"aAZChApN2+":function(e,t,r){var n=r("sgoqXtgn3Q")((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()}));e.exports=n},bdgKLzagsY:function(e,t,r){"use strict";(function(e){var r=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var r=-1;return e.some((function(e,n){return e[0]===t&&(r=n,!0)})),r}return function(){function t(){this.__entries__=[]}var r={size:{configurable:!0}};return r.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var r=e(this.__entries__,t),n=this.__entries__[r];return n&&n[1]},t.prototype.set=function(t,r){var n=e(this.__entries__,t);~n?this.__entries__[n][1]=r:this.__entries__.push([t,r])},t.prototype.delete=function(t){var r=this.__entries__,n=e(r,t);~n&&r.splice(n,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var r=0,n=this.__entries__;r<n.length;r+=1){var o=n[r];e.call(t,o[1],o[0])}},Object.defineProperties(t.prototype,r),t}()}(),n="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,o="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),i="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},a=2,s=["top","right","bottom","left","width","height","size","weight"],c="undefined"!==typeof MutationObserver,u=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var r=!1,n=!1,o=0;function s(){r&&(r=!1,e()),n&&u()}function c(){i(s)}function u(){var e=Date.now();if(r){if(e-o<a)return;n=!0}else r=!0,n=!1,setTimeout(c,t);o=e}return u}(this.refresh.bind(this),20)};u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,r=t.indexOf(e);~r&&t.splice(r,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},u.prototype.connect_=function(){n&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),c?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){n&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),s.some((function(e){return!!~t.indexOf(e)}))&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null;var l=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r+=1){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},f=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},p=v(0,0,0,0);function h(e){return parseFloat(e)||0}function d(e){for(var t=[],r=arguments.length-1;r-- >0;)t[r]=arguments[r+1];return t.reduce((function(t,r){return t+h(e["border-"+r+"-width"])}),0)}function y(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return p;var n=f(e).getComputedStyle(e),o=function(e){for(var t={},r=0,n=["top","right","bottom","left"];r<n.length;r+=1){var o=n[r],i=e["padding-"+o];t[o]=h(i)}return t}(n),i=o.left+o.right,a=o.top+o.bottom,s=h(n.width),c=h(n.height);if("border-box"===n.boxSizing&&(Math.round(s+i)!==t&&(s-=d(n,"left","right")+i),Math.round(c+a)!==r&&(c-=d(n,"top","bottom")+a)),!function(e){return e===f(e).document.documentElement}(e)){var u=Math.round(s+i)-t,l=Math.round(c+a)-r;1!==Math.abs(u)&&(s-=u),1!==Math.abs(l)&&(c-=l)}return v(o.left,o.top,s,c)}var b="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof f(e).SVGGraphicsElement}:function(e){return e instanceof f(e).SVGElement&&"function"===typeof e.getBBox};function m(e){return n?b(e)?function(e){var t=e.getBBox();return v(0,0,t.width,t.height)}(e):y(e):p}function v(e,t,r,n){return{x:e,y:t,width:r,height:n}}var g=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=v(0,0,0,0),this.target=e};g.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},g.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var k=function(e,t){var r,n,o,i,a,s,c,u=(n=(r=t).x,o=r.y,i=r.width,a=r.height,s="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),l(c,{x:n,y:o,width:i,height:a,top:o,right:n+i,bottom:a+o,left:n}),c);l(this,{target:e,contentRect:u})},O=function(e,t,n){if(this.activeObservations_=[],this.observations_=new r,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n};O.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},O.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof f(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},O.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},O.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},O.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new k(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},O.prototype.clearActive=function(){this.activeObservations_.splice(0)},O.prototype.hasActive=function(){return this.activeObservations_.length>0};var w="undefined"!==typeof WeakMap?new WeakMap:new r,P=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=u.getInstance(),n=new O(t,r,this);w.set(this,n)};["observe","unobserve","disconnect"].forEach((function(e){P.prototype[e]=function(){return(t=w.get(this))[e].apply(t,arguments);var t}}));var C="undefined"!==typeof o.ResizeObserver?o.ResizeObserver:P;t.a=C}).call(this,r("yLpjYHveuD"))},dEgP6Cehtk:function(e,t,r){"use strict";var n=r("cr+IVGIN9M"),o=r.n(n),i=r("mwIZSSbMl2"),a=r.n(i),s=r("7EA+m7Wkjh"),c=r("a2jX1cNsCJ"),u=r("fn3w3TIrL6"),l=r("8Wpvjplx0g"),f=r("k1oiGGP5HG"),p=r("vVaM4hVnXJ");function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){m(i,n,o,a,s,"next",e)}function s(e){m(i,n,o,a,s,"throw",e)}a(void 0)}))}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),k(this,O(t).apply(this,arguments))}var r,n,i,f,h,d;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(t,e),r=t,(n=[{key:"getCacheKey",value:function(e){return"".concat(l.e).concat(e)}},{key:"getUrl",value:function(e){var t=e?"/".concat(e):"";return"".concat(this.getBaseApiUrl(),"/files").concat(t)}},{key:"getDownloadUrl",value:(d=v(regeneratorRuntime.mark((function e(t,r,n,i){var a,s,u,f,h,d,b,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.errorCode=l.nb,this.errorCallback=i,this.successCallback=n,a=r[l.ac],s=r[l.Mb],e.next=7,p.a.getReadToken(Object(c.a)(t),this.options.token);case 7:if(u=e.sent,a&&s&&u){e.next=11;break}return this.errorHandler(new Error("Download is missing required fields or token.")),e.abrupt("return");case 11:f=o.a.parseUrl(s),h=f.query,d=f.url,b=y({},h,{access_token:u}),m=o.a.stringify(b),this.successHandler("".concat(d,"?").concat(m));case 15:case"end":return e.stop()}}),e,this)}))),function(e,t,r,n){return d.apply(this,arguments)})},{key:"getThumbnailUrl",value:(h=v(regeneratorRuntime.mark((function e(t){var r,n,i,s,u,l,f,h,d,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a()(t,"representations.entries[0]"),n=a()(r,"representation"),i=a()(r,"content.url_template"),e.next=5,p.a.getReadToken(Object(c.a)(t.id),this.options.token);case 5:if(s=e.sent,"success"===a()(r,"status.state")&&n&&i&&s){e.next=8;break}return e.abrupt("return",null);case 8:return u=i.replace("{+asset_path}","jpg"===n?"":"1.png"),l=o.a.parseUrl(u),f=l.query,h=l.url,d=y({},f,{access_token:s}),b=o.a.stringify(d),e.abrupt("return","".concat(h,"?").concat(b));case 13:case"end":return e.stop()}}),e,this)}))),function(e){return h.apply(this,arguments)})},{key:"setFileDescription",value:function(e,t,r,n){var o=this,i=e.id,a=e.permissions;return i&&a?a.can_rename?this.xhr.put({id:Object(c.a)(i),url:this.getUrl(i),data:{description:t}}).then((function(e){var t=e.data;if(!o.isDestroyed()){var n=o.merge(o.getCacheKey(i),"description",t.description);r(n)}})).catch((function(){if(!o.isDestroyed()){var t=o.merge(o.getCacheKey(i),"description",e.description);n(t)}})):(n(Object(u.b)()),Promise.reject()):(n(Object(u.a)()),Promise.reject())}},{key:"getFile",value:(f=v(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,u,f,p,h,d,y,b,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=m.length>3&&void 0!==m[3]?m[3]:{},!this.isDestroyed()){e.next=3;break}return e.abrupt("return");case 3:if(i=this.getCache(),a=this.getCacheKey(t),u=!o.forceFetch&&i.has(a),f=u?i.get(a):{id:t},p=Object(s.i)(f,o.fields),h={id:Object(c.a)(t),url:this.getUrl(t),headers:{"X-Rep-Hints":l.Me}},this.errorCode=l.ab,this.successCallback=r,this.errorCallback=n,!u||0!==p.length){e.next=17;break}if(r(f),p=o.fields||[],o.refreshCache){e.next=17;break}return e.abrupt("return");case 17:return p.length>0&&(h.params={fields:p.toString()}),e.prev=18,e.next=21,this.xhr.get(h);case 21:if(d=e.sent,y=d.data,!this.isDestroyed()){e.next=25;break}return e.abrupt("return");case 25:b=Object(s.h)(y,p),i.has(a)?i.merge(a,b):i.set(a,b),this.successHandler(i.get(a)),e.next=33;break;case 30:e.prev=30,e.t0=e.catch(18),this.errorHandler(e.t0);case 33:case"end":return e.stop()}}),e,this,[[18,30]])}))),function(e,t,r){return f.apply(this,arguments)})},{key:"getFileExtension",value:function(e,t,r){this.isDestroyed()||this.getFile(e,t,r,{fields:[l.Ub]})}}])&&g(r.prototype,n),i&&g(r,i),t}(f.a);t.a=P},fh8xsLuPZu:function(e,t,r){"use strict";var n=r("3iqZJKdelp"),o=r("8Wpvjplx0g");function i(e){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=5,p=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];return r=function(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?c(e):t}(this,(e=s(t)).call.apply(e,[this].concat(a))),l(c(r),"retryCount",0),l(c(r),"makePreflightRequest",(function(){if(!r.isDestroyed()){var e="".concat(r.getBaseApiUrl(),"/files/content");r.fileId&&(e=e.replace("content","".concat(r.fileId,"/content")));var t=r.file,n=t.size,o=t.name,i={name:r.fileName||o,parent:{id:r.folderId},size:n};r.xhr.options({url:e,data:i,successHandler:r.preflightSuccessHandler,errorHandler:r.preflightErrorHandler})}})),l(c(r),"preflightErrorHandler",(function(e){if(!r.isDestroyed()){r.fileName=r.file?r.file.name:"";var t=e,n=e.response;if(n&&n.data&&(t=n.data),r.retryCount>=f)r.errorCallback(t);else if(t&&409===t.status){if(r.overwrite){var i=t.context_info.conflicts.id;!r.fileId&&i&&(r.fileId=i),r.makePreflightRequest()}else{var a=r.fileName.substr(r.fileName.lastIndexOf("."))||"";r.fileName="".concat(r.fileName.substr(0,r.fileName.lastIndexOf(".")),"-").concat(Date.now()).concat(a),r.makePreflightRequest()}r.retryCount+=1}else if(!t||429!==t.status&&"too_many_requests"!==t.code)t&&(t.status||"Failed to fetch"===t.message)&&"function"===typeof r.errorCallback?r.errorCallback(t):(r.retryTimeout=setTimeout(r.makePreflightRequest,Math.pow(2,r.retryCount)*o.od),r.retryCount+=1);else{var s=o.H;if(t.headers){var c=parseInt(t.headers["retry-after"]||t.headers.get("Retry-After"),10);Number.isNaN(c)||(s=c*o.od)}r.retryTimeout=setTimeout(r.makePreflightRequest,s),r.retryCount+=1}}})),r}var r,n,p;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),r=t,(n=[{key:"readFile",value:function(e,t){return new Promise((function(r,n){e.readAsArrayBuffer(t),e.onload=function(){r({buffer:e.result,readCompleteTimestamp:Date.now()})},e.onerror=n}))}}])&&a(r.prototype,n),p&&a(r,p),t}(n.a);t.a=p},fn3w3TIrL6:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return a})),r.d(t,"d",(function(){return s}));var n=r("8Wpvjplx0g");function o(){return new Error("Bad box item!")}function i(){return new Error("Insufficient Permissions!")}function a(){return new Error("Bad box user!")}function s(e){return e===n.bd||e===n.dd||e===n.Vc||e>=n.Yc}},ijCdHo2SAB:function(e,t,r){var n=r("R/W3CmeeGC"),o=r("MMmD7nEs5h"),i=r("4qC0uLa34A"),a=r("Sxd8nJhe7E"),s=r("P/G1/AIOfM"),c=Math.max;e.exports=function(e,t,r,u){e=o(e)?e:s(e),r=r&&!u?a(r):0;var l=e.length;return r<0&&(r=c(l+r,0)),i(e)?r<=l&&e.indexOf(t,r)>-1:!!l&&n(e,t,r)>-1}},"itsjJeh/nX":function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}},jeLoPZsM55:function(e,t,r){var n=r("juv80SFlx0"),o=r("mTTRHTH0TC");e.exports=function(e){return n(e,o(e))}},k1oiGGP5HG:function(e,t,r){"use strict";var n=r("vN+2IcUykn"),o=r.n(n),i=r("D1y2Gn20OY"),a=r.n(i),s=r("fn3w3TIrL6"),c=r("3iqZJKdelp"),u=r("8Wpvjplx0g");function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var m=function(e){function t(){var e,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r=function(e,t){return!t||"object"!==l(t)&&"function"!==typeof t?d(e):t}(this,(e=h(t)).call.apply(e,[this].concat(o))),b(d(r),"deleteSuccessHandler",(function(){if(!r.isDestroyed()){var e=r.getParentCacheKey(r.parentId),t=r.getCache().get(e);if(t){var n=t.item_collection;if(n){var o=n.entries,i=n.total_count;if(!Array.isArray(o)||"number"!==typeof i)throw Object(s.a)();var a=r.getCacheKey(r.id),c=o.length,u=o.filter((function(e){return e!==a})),l=u.length,p=r.merge(e,"item_collection",f(n,{entries:u,total_count:i-(c-l)}));r.successCallback(p),r.postDeleteCleanup()}else r.postDeleteCleanup()}else r.postDeleteCleanup()}})),b(d(r),"renameSuccessHandler",(function(e){var t=e.data;if(!r.isDestroyed()){r.getCache().unsetAll(u.j);var n=r.merge(r.getCacheKey(r.id),"name",t.name);r.successCallback(n)}})),b(d(r),"shareSuccessHandler",(function(e){var t=e.data;if(!r.isDestroyed()){var n=r.merge(r.getCacheKey(r.id),"shared_link",t.shared_link);r.successCallback(n)}})),r}var r,n,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),r=t,(n=[{key:"getParentCacheKey",value:function(e){return"".concat(u.f).concat(e)}},{key:"getCacheKey",value:function(e){return"getCacheKey(".concat(e,") should be overriden")}},{key:"getUrl",value:function(e){return"getUrl(".concat(e,") should be overriden")}},{key:"merge",value:function(e,t,r){var n=this.getCache();return n.merge(e,a()({},t,r)),n.get(e)}},{key:"postDeleteCleanup",value:function(){this.isDestroyed()||(this.getCache().unsetAll(u.j),this.successCallback())}},{key:"deleteItem",value:function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.a;if(this.isDestroyed())return Promise.reject();this.errorCode=u.R;var i=e.id,a=e.permissions,c=e.parent,l=e.type;if(!i||!a||!c||!l)return n(Object(s.a)(),this.errorCode),Promise.reject();var f=c.id,p=a.can_delete;if(!p||!f)return n(Object(s.b)(),this.errorCode),Promise.reject();this.id=i,this.parentId=f,this.successCallback=t,this.errorCallback=n;var h="".concat(this.getUrl(i)).concat(l===u.ze?"?recursive=true":"");return this.xhr.delete({url:h}).then(this.deleteSuccessHandler).catch((function(e){r.errorHandler(e)}))}},{key:"rename",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.a;if(this.isDestroyed())return Promise.reject();this.errorCode=u.sb;var a=e.id,c=e.permissions;if(!a||!c)return i(Object(s.a)(),this.errorCode),Promise.reject();var l=c.can_rename;return l?(this.id=a,this.successCallback=r,this.errorCallback=i,this.xhr.put({url:"".concat(this.getUrl(a)),data:{name:t}}).then(this.renameSuccessHandler).catch((function(e){n.errorHandler(e)}))):(i(Object(s.b)(),this.errorCode),Promise.reject())}},{key:"share",value:function(e,t,r){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.a;if(this.isDestroyed())return Promise.reject();this.errorCode=u.vb;var a=e.id,c=e.permissions;if(!a||!c)return i(Object(s.a)(),this.errorCode),Promise.reject();var l=c.can_share,f=c.can_set_share_access;return l&&f?(this.id=a,this.successCallback=r,this.errorCallback=i,this.xhr.put({url:this.getUrl(this.id),data:{shared_link:t===u.a?null:{access:t}}}).then(this.shareSuccessHandler).catch((function(e){n.errorHandler(e)}))):(i(Object(s.b)(),this.errorCode),Promise.reject())}}])&&p(r.prototype,n),i&&p(r,i),t}(c.a);t.a=m},lvO4QcjowG:function(e,t){var r=Object.prototype.hasOwnProperty;e.exports=function(e,t){return null!=e&&r.call(e,t)}},"mv/X/lT0Yx":function(e,t,r){var n=r("ljhN1W5uA/"),o=r("MMmD7nEs5h"),i=r("wJg77SgrAM"),a=r("GoyQGQ25b1");e.exports=function(e,t,r){if(!a(r))return!1;var s=typeof t;return!!("number"==s?o(r)&&i(t,r.length):"string"==s&&t in r)&&n(r[t],e)}},t2Dn8I5vat:function(e,t,r){var n=r("hypo9Y2W4m"),o=r("ljhN1W5uA/");e.exports=function(e,t,r){(void 0===r||o(e[t],r))&&(void 0!==r||t in e)||n(e,t,r)}},tEsh7WUI7M:function(e,t,r){e.exports=r("tVzUYOofgm")()},tVzUYOofgm:function(e,t,r){"use strict";var n=r("UEG+jKo9oH");function o(){}e.exports=function(){function e(e,t,r,o,i,a){if(a!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return r.checkPropTypes=o,r.PropTypes=r,r}},vVaM4hVnXJ:function(e,t,r){"use strict";var n=r("8Wpvjplx0g");function o(e){return(o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t,r,n,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void r(e)}s.done?t(c):Promise.resolve(c).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function s(e){i(a,n,o,s,c,"next",e)}function c(e){i(a,n,o,s,c,"throw",e)}s(void 0)}))}}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=new Error("Bad id or auth token. ID should be typed id like file_123 or folder_123! Token should be a string or function."),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,i,u,l,f,p,h;return t=e,r=null,i=[{key:"getToken",value:(h=a(regeneratorRuntime.mark((function e(t,r){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===r||void 0===r||"string"===typeof r||"function"===typeof r)&&(t.startsWith(n.xe)||t.startsWith(n.we))){e.next=2;break}throw c;case 2:if(r&&"string"!==typeof r){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,r(t);case 6:if((i=e.sent)&&"string"!==typeof i&&("object"!==o(i)||!i.read&&!i.write)){e.next=9;break}return e.abrupt("return",i);case 9:throw c;case 10:case"end":return e.stop()}}),e)}))),function(e,t){return h.apply(this,arguments)})},{key:"getReadToken",value:(p=a(regeneratorRuntime.mark((function t(r,n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken(r,n);case 2:if(!(i=t.sent)||"object"!==o(i)){t.next=5;break}return t.abrupt("return",i.read);case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),function(e,t){return p.apply(this,arguments)})},{key:"getReadTokens",value:(f=a(regeneratorRuntime.mark((function t(r,n){var o,i,a,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=Array.isArray(r)?r:[r],i=o.map((function(t){return e.getReadToken(t,n)})),t.next=4,Promise.all(i);case 4:return a=t.sent,s={},a.forEach((function(e,t){s[o[t]]=e})),t.abrupt("return",Promise.resolve(s));case 8:case"end":return t.stop()}}),t)}))),function(e,t){return f.apply(this,arguments)})},{key:"getWriteToken",value:(l=a(regeneratorRuntime.mark((function t(r,n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getToken(r,n);case 2:if(!(i=t.sent)||"object"!==o(i)){t.next=5;break}return t.abrupt("return",i.write||i.read);case 5:return t.abrupt("return",i);case 6:case"end":return t.stop()}}),t)}))),function(e,t){return l.apply(this,arguments)})},{key:"cacheTokens",value:(u=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===r||void 0===r||"string"===typeof r||"function"===typeof r)&&t.every((function(e){return e.startsWith(n.xe)||e.startsWith(n.we)}))){e.next=2;break}throw c;case 2:if("function"!==typeof r){e.next=5;break}return e.next=5,r(t);case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e)}))),function(e,t){return u.apply(this,arguments)})}],r&&s(t.prototype,r),i&&s(t,i),e}();t.a=u},zJHzwnUt45:function(e,t,r){"use strict";var n=r("JRPeW/Ew/U"),o=Object(n.defineMessages)({appActivityDeleteErrorMessage:{id:"be.api.appActivityDeleteErrorMessage",defaultMessage:"There was an error deleting this item."},commentCreateErrorMessage:{id:"be.api.commentCreateErrorMessage",defaultMessage:"There was an error creating this comment."},commentCreateConflictMessage:{id:"be.api.commentCreateConflictMessage",defaultMessage:"This comment already exists."},commentDeleteErrorMessage:{id:"be.api.commentDeleteErrorMessage",defaultMessage:"There was an error deleting this comment."},taskActionErrorTitle:{id:"be.api.taskActionErrorTitle",defaultMessage:"Error"},taskApproveErrorMessage:{id:"be.api.taskApproveErrorMessage",defaultMessage:"An error has occurred while approving this task. Please refresh the page and try again."},taskCompleteErrorMessage:{id:"be.api.taskCompleteErrorMessage",defaultMessage:"An error has occurred while completing this task. Please refresh the page and try again."},taskRejectErrorMessage:{id:"be.api.taskRejectErrorMessage",defaultMessage:"An error has occurred while rejecting this task. Please refresh the page and try again."},taskDeleteErrorMessage:{id:"be.api.taskDeleteErrorMessage",defaultMessage:"There was an error while deleting this task. Please refresh the page and try again."},taskCreateErrorMessage:{id:"be.api.taskCreateErrorMessage",defaultMessage:"An error occurred while creating this task. Please try again."}});t.a=o}}]);